!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("ethereumjs-util"),require("bn.js"),require("web3"),require("ethereumjs-tx"),require("axios"),require("merkle-patricia-tree"),require("@maticnetwork/meta/network"),require("eth-sig-util")):"function"==typeof define&&define.amd?define("matic",["ethereumjs-util","bn.js","web3","ethereumjs-tx","axios","merkle-patricia-tree","@maticnetwork/meta/network","eth-sig-util"],e):"object"==typeof exports?exports.matic=e(require("ethereumjs-util"),require("bn.js"),require("web3"),require("ethereumjs-tx"),require("axios"),require("merkle-patricia-tree"),require("@maticnetwork/meta/network"),require("eth-sig-util")):t.matic=e(t["ethereumjs-util"],t["bn.js"],t.web3,t["ethereumjs-tx"],t.axios,t["merkle-patricia-tree"],t["@maticnetwork/meta/network"],t["eth-sig-util"])}(window,(function(t,e,n,r,o,i,a,s){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=16)}([function(t,e,n){(function(r){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(r++,"%c"===t&&(o=r))}),e.splice(o,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n(20)(e);const{formatters:o}=t.exports;o.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,n(6))},function(e,n){e.exports=t},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(5)),i=function(){function t(t,e){this.web3Client=t,this.network=e}return t.prototype.encode=function(t){if("number"==typeof t)t=new o.default(t);else if("string"==typeof t){if("0x"===t.slice(0,2))return t;t=new o.default(t)}if(o.default.isBN(t))return"0x"+t.toString(16)},t.prototype.getERC20TokenContract=function(t,e){return void 0===e&&(e=!1),new(e?this.web3Client.parentWeb3:this.web3Client.web3).eth.Contract(this.network.abi("ChildERC20"),t)},t.prototype.getERC721TokenContract=function(t,e){return void 0===e&&(e=!1),new(e?this.web3Client.parentWeb3:this.web3Client.web3).eth.Contract(this.network.abi("ChildERC721"),t)},t.prototype.getChildMaticContract=function(){return new this.web3Client.web3.eth.Contract(this.network.abi("MRC20"),t.MATIC_CHILD_TOKEN)},t.prototype.getPOSERC20TokenContract=function(t,e){return void 0===e&&(e=!1),new(e?this.web3Client.parentWeb3:this.web3Client.web3).eth.Contract(this.network.abi("ChildERC20","pos"),t)},t.prototype.getPOSERC721TokenContract=function(t,e){return void 0===e&&(e=!1),new(e?this.web3Client.parentWeb3:this.web3Client.web3).eth.Contract(this.network.abi("ChildERC721","pos"),t)},t.prototype.getPOSERC1155TokenContract=function(t,e){return void 0===e&&(e=!1),new(e?this.web3Client.parentWeb3:this.web3Client.web3).eth.Contract(this.network.abi("ChildERC1155","pos"),t)},t.MATIC_CHILD_TOKEN="0x0000000000000000000000000000000000001010",t}();e.default=i},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(23),o=n(24),i=n(25);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),o=(t=s(t,r)).write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):h(t,e);if("Buffer"===e.type&&i(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(f(e),t=s(t,e<0?0:0|d(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(r)return N(t).length;e=(""+e).toLowerCase(),r=!0}}function b(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,n);case"utf8":case"utf-8":return _(this,e,n);case"ascii":return O(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return R(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,o);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,o){var i,a=1,s=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var f=-1;for(i=n;i<s;i++)if(u(t,i)===u(e,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===c)return f*a}else-1!==f&&(i-=i-f),f=-1}else for(n+c>s&&(n=s-c),i=n;i>=0;i--){for(var l=!0,h=0;h<c;h++)if(u(t,i+h)!==u(e,h)){l=!1;break}if(l)return i}return-1}function v(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function w(t,e,n,r){return W(N(e,t.length-n),t,n,r)}function C(t,e,n,r){return W(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function E(t,e,n,r){return C(t,e,n,r)}function k(t,e,n,r){return W(U(e),t,n,r)}function x(t,e,n,r){return W(function(t,e){for(var n,r,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function R(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function _(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,a,s,c,u=t[o],f=null,l=u>239?4:u>223?3:u>191?2:1;if(o+l<=n)switch(l){case 1:u<128&&(f=u);break;case 2:128==(192&(i=t[o+1]))&&(c=(31&u)<<6|63&i)>127&&(f=c);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&(c=(15&u)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(f=c);break;case 4:i=t[o+1],a=t[o+2],s=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(f=c)}null===f?(f=65533,l=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),o+=l}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=c,e.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return u(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,r){return f(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},c.allocUnsafe=function(t){return l(null,t)},c.allocUnsafeSlow=function(t){return l(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?_(this,0,t):b.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,o){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(i,a),u=this.slice(r,o),f=t.slice(e,n),l=0;l<s;++l)if(u[l]!==f[l]){i=u[l],a=f[l];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return C(this,t,e,n);case"latin1":case"binary":return E(this,t,e,n);case"base64":return k(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function P(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function T(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=D(t[i]);return o}function S(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function A(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,r,o,i){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function I(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function B(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function j(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,r,i){return i||j(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function H(t,e,n,r,i){return i||j(t,0,n,8),o.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var o=e-t;n=new c(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},c.prototype.readUInt8=function(t,e){return e||A(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||A(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||A(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},c.prototype.readInt8=function(t,e){return e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||A(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||A(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||A(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||A(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||A(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||A(t,8,this.length),o.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):B(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);M(this,t,e,n,o-1,-o)}var i=0,a=1,s=0;for(this[e]=255&t;++i<n&&(a*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);M(this,t,e,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):B(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return H(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return H(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var a=c.isBuffer(t)?t:N(new c(t,r).toString()),s=a.length;for(i=0;i<n-e;++i)this[i+e]=a[i%s]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function D(t){return t<16?"0"+t.toString(16):t.toString(16)}function N(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function U(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(L,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function W(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,n(4))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,n){t.exports=e},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,u=[],f=!1,l=-1;function h(){f&&c&&(f=!1,c.length?u=c.concat(u):l=-1,u.length&&d())}function d(){if(!f){var t=s(h);f=!0;for(var e=u.length;e;){for(c=u,u=[];++l<e;)c&&c[l].run();l=-1,e=u.length}c=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function b(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||f||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=b,o.addListener=b,o.once=b,o.off=b,o.removeListener=b,o.removeAllListeners=b,o.emit=b,o.prependListener=b,o.prependOnceListener=b,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){t.exports=n},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.mapPromise=void 0;var i=function(t,e){var n=t.map((function(t,n){return e(t,n)}));return Promise.all(n)};e.mapPromise=function(t,e,n){var a=this;void 0===n&&(n={});var s=t.length,c=n.concurrency||s,u=[],f=function(){return r(a,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return n=t.splice(0,c),[4,i(n,e)];case 1:return r=o.sent(),u=u.concat(r),s>u.length?[4,f()]:[3,3];case 2:o.sent(),o.label=3;case 3:return[2,u]}}))}))};return f()}},function(t,e){t.exports=r},function(t,e,n){"use strict";(function(t){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=s(n(5)),u=s(n(29)),f=s(n(1)),l=s(n(11)),h=s(n(2)),d=s(n(12)),p=(new(s(n(7)).default)).utils.soliditySha3,b={info:n(0)("maticjs:WithdrawManager"),debug:n(0)("maticjs:debug:WithdrawManager")},m=function(e){function n(t,n,r){var o=e.call(this,r,n.network)||this;return o.rootChain=t,o.networkApiUrl=n.network.Matic.NetworkAPI,o}return o(n,e),n.prototype.buildPayloadForExit=function(e,n,r){return i(this,void 0,void 0,(function(){var o,i,s,f,l,h,p,m,g;return a(this,(function(a){switch(a.label){case 0:return[4,this.rootChain.getLastChildBlock()];case 1:return o=a.sent(),[4,this.web3Client.getMaticWeb3().eth.getTransaction(e)];case 2:return i=a.sent(),[4,this.web3Client.getMaticWeb3().eth.getTransactionReceipt(e)];case 3:return s=a.sent(),[4,this.web3Client.getMaticWeb3().eth.getBlock(i.blockNumber,!0)];case 4:return f=a.sent(),b.info({"burnTx.blockNumber":i.blockNumber,lastCheckPointedBlockNumber:o}),u.default.ok(new c.default(o).gte(new c.default(i.blockNumber)),"Burn transaction has not been checkpointed as yet"),[4,this.rootChain.findHeaderBlockNumber(i.blockNumber)];case 5:return l=a.sent(),[4,this.web3Client.call(this.rootChain.rootChain.methods.headerBlocks(this.encode(l)))];case 6:return h=a.sent(),b.info({headerBlockNumber:l.toString(),headerBlock:h}),[4,d.default.buildBlockProof(this.web3Client.getMaticWeb3(),parseInt(h.start,10),parseInt(h.end,10),parseInt(i.blockNumber+"",10))];case 7:return p=a.sent(),[4,d.default.getReceiptProof(s,f,this.web3Client.getMaticWeb3(),r)];case 8:switch(m=a.sent(),g=-1,n){case"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef":case"0xf94915c6d1fd521cee85359239227480c7e8776d7caf1fc3bacad5c269b66a14":g=s.logs.findIndex((function(t){return t.topics[0].toLowerCase()==n.toLowerCase()&&"0x0000000000000000000000000000000000000000000000000000000000000000"==t.topics[2].toLowerCase()}));break;case"0xc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62":case"0x4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb":g=s.logs.findIndex((function(t){return t.topics[0].toLowerCase()==n.toLowerCase()&&"0x0000000000000000000000000000000000000000000000000000000000000000"==t.topics[3].toLowerCase()}));break;default:g=s.logs.findIndex((function(t){return t.topics[0].toLowerCase()==n.toLowerCase()}))}return u.default.ok(g>-1,"Log not found in receipt"),[2,this._encodePayload(l,p,i.blockNumber,f.timestamp,t.from(f.transactionsRoot.slice(2),"hex"),t.from(f.receiptsRoot.slice(2),"hex"),d.default.getReceiptBytes(s),m.parentNodes,m.path,g)]}}))}))},n.prototype.buildPayloadForExitFastMerkle=function(t,e,n){return i(this,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:return[4,d.default.buildBlockProof(this.web3Client.getMaticWeb3(),parseInt(t,10),parseInt(e,10),parseInt(n+"",10))];case 1:return[2,r.sent()]}}))}))},n.prototype.buildPayloadForExitHermoine=function(e,n){return i(this,void 0,void 0,(function(){var r,o,i,s,f,h,p,m,g,y,v,w,C;return a(this,(function(a){switch(a.label){case 0:return[4,this.rootChain.getLastChildBlock()];case 1:return r=a.sent(),[4,this.web3Client.getMaticWeb3().eth.getTransactionReceipt(e)];case 2:return o=a.sent(),[4,this.web3Client.getMaticWeb3().eth.getBlock(o.blockNumber,!0)];case 3:i=a.sent(),b.info({"receipt.blockNumber":o.blockNumber,lastCheckPointedBlockNumber:r}),u.default.ok(new c.default(r).gte(new c.default(o.blockNumber)),"Burn transaction has not been checkpointed as yet"),a.label=4;case 4:return a.trys.push([4,6,,9]),[4,l.default.get(this.networkApiUrl+"/block-included/"+o.blockNumber)];case 5:if(f=a.sent(),!((s=f.data)&&s.start&&s.end&&s.headerBlockNumber))throw Error("Network API Error");return[3,9];case 6:return a.sent(),[4,this.rootChain.findHeaderBlockNumber(o.blockNumber)];case 7:return h=a.sent(),[4,this.web3Client.call(this.rootChain.rootChain.methods.headerBlocks(this.encode(h)))];case 8:return s=a.sent(),[3,9];case 9:p=parseInt(s.start,10),m=parseInt(s.end,10),g=parseInt(o.blockNumber+"",10),a.label=10;case 10:return a.trys.push([10,12,,14]),[4,l.default.get(this.networkApiUrl+"/fast-merkle-proof?start="+p+"&end="+m+"&number="+g)];case 11:if(v=a.sent(),!(y=v.data.proof))throw Error("Network API Error");return[3,14];case 12:return a.sent(),[4,this.buildPayloadForExitFastMerkle(p,m,g)];case 13:return y=a.sent(),[3,14];case 14:return[4,d.default.getReceiptProof(o,i,this.web3Client.getMaticWeb3())];case 15:switch(w=a.sent(),C=-1,n){case"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef":case"0xf94915c6d1fd521cee85359239227480c7e8776d7caf1fc3bacad5c269b66a14":C=o.logs.findIndex((function(t){return t.topics[0].toLowerCase()==n.toLowerCase()&&"0x0000000000000000000000000000000000000000000000000000000000000000"==t.topics[2].toLowerCase()}));break;case"0xc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62":case"0x4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb":C=o.logs.findIndex((function(t){return t.topics[0].toLowerCase()==n.toLowerCase()&&"0x0000000000000000000000000000000000000000000000000000000000000000"==t.topics[3].toLowerCase()}));break;default:C=o.logs.findIndex((function(t){return t.topics[0].toLowerCase()==n.toLowerCase()}))}return u.default.ok(C>-1,"Log not found in receipt"),[2,this._encodePayload(s.headerBlockNumber,y,o.blockNumber,i.timestamp,t.from(i.transactionsRoot.slice(2),"hex"),t.from(i.receiptsRoot.slice(2),"hex"),d.default.getReceiptBytes(o),w.parentNodes,w.path,C)]}}))}))},n.prototype.getExitHash=function(e,n,r){return i(this,void 0,void 0,(function(){var o,i,s,l,h,b;return a(this,(function(a){switch(a.label){case 0:return[4,this.rootChain.getLastChildBlock()];case 1:return o=a.sent(),[4,this.web3Client.getMaticWeb3().eth.getTransactionReceipt(e)];case 2:return i=a.sent(),[4,this.web3Client.getMaticWeb3().eth.getBlock(i.blockNumber,!0)];case 3:return s=a.sent(),u.default.ok(new c.default(o).gte(new c.default(i.blockNumber)),"Burn transaction has not been checkpointed as yet"),[4,d.default.getReceiptProof(i,s,this.web3Client.getMaticWeb3(),r)];case 4:switch(l=a.sent(),h=-1,n){case"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef":case"0xf94915c6d1fd521cee85359239227480c7e8776d7caf1fc3bacad5c269b66a14":h=i.logs.findIndex((function(t){return t.topics[0].toLowerCase()==n.toLowerCase()&&"0x0000000000000000000000000000000000000000000000000000000000000000"==t.topics[2].toLowerCase()}));break;case"0xc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62":case"0x4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb":h=i.logs.findIndex((function(t){return t.topics[0].toLowerCase()==n.toLowerCase()&&"0x0000000000000000000000000000000000000000000000000000000000000000"==t.topics[3].toLowerCase()}))}return u.default.ok(h>-1,"Log not found in receipt"),b=[],l.path.forEach((function(e){b.push(t.from("0"+(e/16).toString(16),"hex")),b.push(t.from("0"+(e%16).toString(16),"hex"))})),[2,p(i.blockNumber,f.default.bufferToHex(t.concat(b)),h)]}}))}))},n.prototype._encodePayload=function(e,n,r,o,i,a,s,c,u,l){return f.default.bufferToHex(f.default.rlp.encode([e,n,r,o,f.default.bufferToHex(i),f.default.bufferToHex(a),f.default.bufferToHex(s),f.default.bufferToHex(f.default.rlp.encode(c)),f.default.bufferToHex(t.concat([t.from("00","hex"),u])),l]))},n}(h.default);e.default=m}).call(this,n(3).Buffer)},function(t,e){t.exports=o},function(t,e,n){"use strict";(function(t){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(11)),s=n(8),c=n(5),u=n(13),f=n(9),l=n(1),h=n(34),d=n(36),p=l.rlp,b={info:n(0)("maticjs:Web3Client"),debug:n(0)("maticjs:debug:Web3Client")},m=function(){function e(){}return e.getBlockHeader=function(e){var n=new c(e.number).toArrayLike(t,"be",32),r=new c(e.timestamp).toArrayLike(t,"be",32),o=l.toBuffer(e.transactionsRoot),i=l.toBuffer(e.receiptsRoot);return l.keccak256(t.concat([n,r,o,i]))},e.buildCheckpointRoot=function(t,n,i){return r(this,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return b.debug("buildCheckpointRoot..."),[4,e.buildBlockHeaderMerkle(t,n,i)];case 1:return r=o.sent(),[2,l.bufferToHex(r.getRoot())]}}))}))},e.buildBlockProof=function(n,i,a,s){return r(this,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return b.debug("buildBlockProof...",i,a,s),[4,e.getFastMerkleProof(n,s,i,a)];case 1:return r=o.sent(),[2,l.bufferToHex(t.concat(r.map((function(t){return l.toBuffer(t)}))))]}}))}))},e.buildBlockProofHermoine=function(n,i,a,s,c){return r(this,void 0,void 0,(function(){var r,u,f,h,d,p;return o(this,(function(o){switch(o.label){case 0:return b.debug("buildBlockProof...",i,a,s),[4,e.buildBlockHeaderMerkleHermoine(i,a,c)];case 1:return r=o.sent(),h=(f=r).getProof,p=(d=e).getBlockHeader,[4,n.eth.getBlock(s)];case 2:return u=h.apply(f,[p.apply(d,[o.sent()])]),[2,l.bufferToHex(t.concat(u))]}}))}))},e.queryRootHash=function(t,e,n){return r(this,void 0,void 0,(function(){var r,i,a;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),i=(r=l).toBuffer,a="0x",[4,t.bor.getRootHash(e,n)];case 1:return[2,i.apply(r,[a+o.sent()])];case 2:return o.sent(),[2,null];case 3:return[2]}}))}))},e.recursiveZeroHash=function(t,e){if(0===t)return"0x0000000000000000000000000000000000000000000000000000000000000000";var n=this.recursiveZeroHash(t-1,e);return l.keccak256(l.toBuffer(e.eth.abi.encodeParameters(["bytes32","bytes32"],[n,n])))},e.getFastMerkleProof=function(t,e,n,i){return r(this,void 0,void 0,(function(){var r,a,s,c,u,f,d,p,b;return o(this,(function(m){switch(m.label){case 0:r=Math.ceil(Math.log2(i-n+1)),a=[],c=e-(s=n),u=0,f=i-s,d=function(e){var n,i,d,b,m,g,y,v,w,C,E;return o(this,(function(o){switch(o.label){case 0:return n=Math.pow(2,r-e),c>(i=u+n/2-1)?(d=i+1,[4,p.queryRootHash(t,s+u,s+i)]):[3,2];case 1:return E=o.sent(),a.push(E),u=d,[3,6];case 2:return b=Math.min(f,i),m=r-(e+1),f<=i?(E=p.recursiveZeroHash(m,t),a.push(E),[3,5]):[3,3];case 3:return g=Math.ceil(Math.log2(f-i)),y=m-g,[4,p.queryRootHash(t,s+i+1,s+f)];case 4:v=o.sent(),w=p.recursiveZeroHash(g,t),(C=Array.from({length:Math.pow(2,y)},(function(){return l.toBuffer(w)})))[0]=v,E=new h(C).getRoot(),a.push(E),o.label=5;case 5:f=b,o.label=6;case 6:return[2]}}))},p=this,b=0,m.label=1;case 1:return b<r?[5,d(b)]:[3,4];case 2:m.sent(),m.label=3;case 3:return b+=1,[3,1];case 4:return[2,a.reverse()]}}))}))},e.buildBlockHeaderMerkleHermoine=function(t,n,i){return r(this,void 0,void 0,(function(){var r,s,c,u;return o(this,(function(o){switch(o.label){case 0:return[4,a.default.get(i+"/generate-proof?start="+t+"&end="+n)];case 1:for(r=o.sent(),s=r.data.merkle_headerblocks,c=new Array(n-t+1),u=0;u<n-t+1;u++)c[u]=e.getBlockHeader(s[u]);return[2,new h(c)]}}))}))},e.buildBlockHeaderMerkle=function(t,n,i){return r(this,void 0,void 0,(function(){var a,c=this;return o(this,(function(u){switch(u.label){case 0:return a=new Array(i-n+1),[4,s.mapPromise(a,(function(i,s){return r(c,void 0,void 0,(function(){var r,i,c,u;return o(this,(function(o){switch(o.label){case 0:return b.debug("fetching block",s+n),r=a,i=s,u=(c=e).getBlockHeader,[4,t.eth.getBlock(s+n)];case 1:return r[i]=u.apply(c,[o.sent()]),[2]}}))}))}),{concurrency:20})];case 1:return u.sent(),[2,new h(a)]}}))}))},e.getTxProof=function(t,n){return r(this,void 0,void 0,(function(){var r,i,a,s;return o(this,(function(c){switch(c.label){case 0:r=new u,i=l.bufferToHex(e.getStateSyncTxHash(n)),a=function(t){var a,s,c;return o(this,(function(o){switch(o.label){case 0:return(a=n.transactions[t]).hash===i?[2,"continue"]:(s=p.encode(a.transactionIndex),c=e.getTxBytes(a),[4,new Promise((function(t,e){r.put(s,c,(function(n){n?e(n):t({})}))}))]);case 1:return o.sent(),[2]}}))},s=0,c.label=1;case 1:return s<n.transactions.length?[5,a(s)]:[3,4];case 2:c.sent(),c.label=3;case 3:return s++,[3,1];case 4:return[2,new Promise((function(o,i){r.findPath(p.encode(t.transactionIndex),(function(r,a,s,c){if(r)return i(r);if(s.length>0)return i(new Error("Node does not contain the key"));var u={blockHash:l.toBuffer(t.blockHash),parentNodes:c.map((function(t){return t.raw})),root:e.getRawHeader(n).transactionsTrie,path:p.encode(t.transactionIndex),value:p.decode(a.value)};o(u)}))}))]}}))}))},e.getTxBytes=function(t){return new f(e.squanchTx(t)).serialize()},e.squanchTx=function(t){return t.gasPrice="0x"+parseInt(t.gasPrice).toString(16),t.value="0x"+parseInt(t.value).toString(16)||!1,t.gas="0x"+parseInt(t.gas).toString(16),t.data=t.input,t},e.getRawHeader=function(t){return"string"!=typeof t.difficulty&&(t.difficulty="0x"+t.difficulty.toString(16)),new d(t).header},e.getReceiptProof=function(t,n,i,a,c){return void 0===a&&(a=1/0),r(this,void 0,void 0,(function(){var r,f,h,d,b;return o(this,(function(m){switch(m.label){case 0:return r=l.bufferToHex(e.getStateSyncTxHash(n)),f=new u,h=[],c?[3,2]:(n.transactions.forEach((function(t){t.hash!==r&&h.push(i.eth.getTransactionReceipt(t.hash))})),[4,s.mapPromise(h,(function(t){return t}),{concurrency:a})]);case 1:c=m.sent(),m.label=2;case 2:d=function(t){var n,r,i;return o(this,(function(o){switch(o.label){case 0:return n=c[t],r=p.encode(n.transactionIndex),i=e.getReceiptBytes(n),[4,new Promise((function(t,e){f.put(r,i,(function(n){n?e(n):t({})}))}))];case 1:return o.sent(),[2]}}))},b=0,m.label=3;case 3:return b<c.length?[5,d(b)]:[3,6];case 4:m.sent(),m.label=5;case 5:return b++,[3,3];case 6:return[2,new Promise((function(r,o){f.findPath(p.encode(t.transactionIndex),(function(i,a,s,c){if(i)return o(i);if(s.length>0)return o(new Error("Node does not contain the key"));var u={blockHash:l.toBuffer(t.blockHash),parentNodes:c.map((function(t){return t.raw})),root:e.getRawHeader(n).receiptTrie,path:p.encode(t.transactionIndex),value:e.isTypedReceipt(t)?a.value:p.decode(a.value)};r(u)}))}))]}}))}))},e.isTypedReceipt=function(t){return void 0!==t.status&&null!==t.status&&"0x0"!==t.type&&"0x"!==t.type},e.getReceiptBytes=function(n){var r=p.encode([l.toBuffer(void 0!==n.status&&null!=n.status?n.status?"0x1":"0x":n.root),l.toBuffer(n.cumulativeGasUsed),l.toBuffer(n.logsBloom),n.logs.map((function(t){return[l.toBuffer(t.address),t.topics.map(l.toBuffer),l.toBuffer(t.data)]}))]);return e.isTypedReceipt(n)&&(r=t.concat([l.toBuffer(n.type),r])),r},e.getStateSyncTxHash=function(e){return l.keccak256(t.concat([l.toBuffer("matic-bor-receipt-"),l.setLengthLeft(l.toBuffer(e.number),8),l.toBuffer(e.hash)]))},e}();e.default=m}).call(this,n(3).Buffer)},function(t,e){t.exports=i},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(38),i=n(44),a=function(){function t(t,e,n){this._chainParams=this.setChain(t),this._hardfork=null,this._supportedHardforks=void 0===n?[]:n,e&&this.setHardfork(e)}return t.forCustomChain=function(e,n,o,i){var a=t._getChainParams(e);return new t(r(r({},a),n),o,i)},t._getChainParams=function(t){if("number"==typeof t){if(o.chains.names[t])return o.chains[o.chains.names[t]];throw new Error("Chain with ID "+t+" not supported")}if(o.chains[t])return o.chains[t];throw new Error("Chain with name "+t+" not supported")},t.prototype.setChain=function(e){if("number"==typeof e||"string"==typeof e)this._chainParams=t._getChainParams(e);else{if("object"!=typeof e)throw new Error("Wrong input format");for(var n=0,r=["networkId","genesis","hardforks","bootstrapNodes"];n<r.length;n++){var o=r[n];if(void 0===e[o])throw new Error("Missing required chain parameter: "+o)}this._chainParams=e}return this._chainParams},t.prototype.setHardfork=function(t){if(!this._isSupportedHardfork(t))throw new Error("Hardfork "+t+" not set as supported in supportedHardforks");for(var e=!1,n=0,r=i.hardforks;n<r.length;n++){r[n][0]===t&&(this._hardfork=t,e=!0)}if(!e)throw new Error("Hardfork with name "+t+" not supported")},t.prototype._chooseHardfork=function(t,e){if(e=void 0===e||e,t){if(e&&!this._isSupportedHardfork(t))throw new Error("Hardfork "+t+" not set as supported in supportedHardforks")}else{if(!this._hardfork)throw new Error("Method called with neither a hardfork set nor provided by param");t=this._hardfork}return t},t.prototype._getHardfork=function(t){for(var e=0,n=this.hardforks();e<n.length;e++){var r=n[e];if(r.name===t)return r}throw new Error("Hardfork "+t+" not defined for chain "+this.chainName())},t.prototype._isSupportedHardfork=function(t){if(!(this._supportedHardforks.length>0))return!0;for(var e=0,n=this._supportedHardforks;e<n.length;e++){if(t===n[e])return!0}return!1},t.prototype.param=function(t,e,n){var r;n=this._chooseHardfork(n);for(var o=0,a=i.hardforks;o<a.length;o++){var s=a[o];if(!s[1][t])throw new Error("Topic "+t+" not defined");if(void 0!==s[1][t][e]&&(r=s[1][t][e].v),s[0]===n)break}if(void 0===r)throw new Error(t+" value for "+e+" not found");return r},t.prototype.paramByBlock=function(t,e,n){var r=this.activeHardforks(n),o=r[r.length-1].name;return this.param(t,e,o)},t.prototype.hardforkIsActiveOnBlock=function(t,e,n){var r=void 0!==(n=void 0!==n?n:{}).onlySupported&&n.onlySupported;t=this._chooseHardfork(t,r);var o=this.hardforkBlock(t);return null!==o&&e>=o},t.prototype.activeOnBlock=function(t,e){return this.hardforkIsActiveOnBlock(null,t,e)},t.prototype.hardforkGteHardfork=function(t,e,n){var r=void 0!==(n=void 0!==n?n:{}).onlyActive&&n.onlyActive;t=this._chooseHardfork(t,n.onlySupported);for(var o=-1,i=-1,a=0,s=0,c=r?this.activeHardforks(null,n):this.hardforks();s<c.length;s++){var u=c[s];u.name===t&&(o=a),u.name===e&&(i=a),a+=1}return o>=i},t.prototype.gteHardfork=function(t,e){return this.hardforkGteHardfork(null,t,e)},t.prototype.hardforkIsActiveOnChain=function(t,e){var n=void 0!==(e=void 0!==e?e:{}).onlySupported&&e.onlySupported;t=this._chooseHardfork(t,n);for(var r=0,o=this.hardforks();r<o.length;r++){var i=o[r];if(i.name===t&&null!==i.block)return!0}return!1},t.prototype.activeHardforks=function(t,e){e=void 0!==e?e:{};for(var n=[],r=0,o=this.hardforks();r<o.length;r++){var i=o[r];if(null!==i.block){if(null!=t&&t<i.block)break;e.onlySupported&&!this._isSupportedHardfork(i.name)||n.push(i)}}return n},t.prototype.activeHardfork=function(t,e){e=void 0!==e?e:{};var n=this.activeHardforks(t,e);if(n.length>0)return n[n.length-1].name;throw new Error("No (supported) active hardfork found")},t.prototype.hardforkBlock=function(t){return t=this._chooseHardfork(t,!1),this._getHardfork(t).block},t.prototype.isHardforkBlock=function(t,e){return e=this._chooseHardfork(e,!1),this.hardforkBlock(e)===t},t.prototype.consensus=function(t){return t=this._chooseHardfork(t),this._getHardfork(t).consensus},t.prototype.finality=function(t){return t=this._chooseHardfork(t),this._getHardfork(t).finality},t.prototype.genesis=function(){return this._chainParams.genesis},t.prototype.hardforks=function(){return this._chainParams.hardforks},t.prototype.bootstrapNodes=function(){return this._chainParams.bootstrapNodes},t.prototype.hardfork=function(){return this._hardfork},t.prototype.chainId=function(){return this._chainParams.chainId},t.prototype.chainName=function(){return o.chains.names[this.chainId()]||this._chainParams.name},t.prototype.networkId=function(){return this._chainParams.networkId},t}();e.default=a},function(t,e,n){(function(e){const r=n(14).default,o=n(1),i=o.BN;var a=t.exports=function(t,n){if((n=n||{}).common){if(n.chain)throw new Error("Instantiation with both opts.common and opts.chain parameter not allowed!");this._common=n.common}else{let t=n.chain?n.chain:"mainnet",e=n.hardfork?n.hardfork:null;this._common=new r(t,e)}var i=[{name:"parentHash",length:32,default:o.zeros(32)},{name:"uncleHash",default:o.SHA3_RLP_ARRAY},{name:"coinbase",length:20,default:o.zeros(20)},{name:"stateRoot",length:32,default:o.zeros(32)},{name:"transactionsTrie",length:32,default:o.SHA3_RLP},{name:"receiptTrie",length:32,default:o.SHA3_RLP},{name:"bloom",default:o.zeros(256)},{name:"difficulty",default:e.from([])},{name:"number",default:o.intToBuffer(115e4)},{name:"gasLimit",default:e.from("ffffffffffffff","hex")},{name:"gasUsed",empty:!0,default:e.from([])},{name:"timestamp",default:e.from([])},{name:"extraData",allowZero:!0,empty:!0,default:e.from([])},{name:"mixHash",default:o.zeros(32)},{name:"nonce",default:o.zeros(8)}];o.defineProperties(this,i,t)};a.prototype.canonicalDifficulty=function(t){const e=this._common.hardfork()||this._common.activeHardfork(o.bufferToInt(this.number)),n=new i(this.timestamp),r=new i(t.header.timestamp),a=new i(t.header.difficulty),s=new i(this._common.param("pow","minimumDifficulty",e));var c,u,f,l=a.div(new i(this._common.param("pow","difficultyBoundDivisor",e))),h=new i(this.number);if(this._common.hardforkGteHardfork(e,"byzantium")){var d=t.header.uncleHash.equals(o.SHA3_RLP_ARRAY)?1:2;c=n.sub(r).idivn(9).ineg().iaddn(d),1===(u=new i(-99)).cmp(c)&&(c=u),f=a.add(l.mul(c))}this._common.hardforkGteHardfork(e,"constantinople")?(h.isubn(5e6),h.ltn(0)&&(h=new i(0))):this._common.hardforkGteHardfork(e,"byzantium")?(h.isubn(3e6),h.ltn(0)&&(h=new i(0))):this._common.hardforkGteHardfork(e,"homestead")?(c=n.sub(r).idivn(10).ineg().iaddn(1),1===(u=new i(-99)).cmp(c)&&(c=u),f=a.add(l.mul(c))):f=1===r.addn(this._common.param("pow","durationLimit",e)).cmp(n)?l.add(a):a.sub(l);var p=h.idivn(1e5).isubn(2);return p.isNeg()||f.iadd(new i(2).pow(p)),-1===f.cmp(s)&&(f=s),f},a.prototype.validateDifficulty=function(t){return 0===this.canonicalDifficulty(t).cmp(new i(this.difficulty))},a.prototype.validateGasLimit=function(t){const e=new i(t.header.gasLimit),n=new i(this.gasLimit),r=this._common.hardfork()?this._common.hardfork():this._common.activeHardfork(this.number),o=e.div(new i(this._common.param("gasConfig","gasLimitBoundDivisor",r))),a=e.add(o),s=e.sub(o);return n.lt(a)&&n.gt(s)&&n.gte(this._common.param("gasConfig","minGasLimit",r))},a.prototype.validate=function(t,e,n){var r=this;if(2===arguments.length&&(n=e,e=!1),this.isGenesis())return n();t.getBlock(r.parentHash,(function(t,a){if(t)return n("could not find parent block");if(r.parentBlock=a,0!==new i(r.number).cmp(new i(a.header.number).iaddn(1)))return n("invalid number");if(e){var s=e.sub(new i(a.header.number));if(-1!==s.cmpn(8)||1!==s.cmpn(1))return n("uncle block has a parent that is too old or to young")}if(!r.validateDifficulty(a))return n("invalid Difficulty");if(!r.validateGasLimit(a))return n("invalid gas limit");if(o.bufferToInt(a.header.number)+1!==o.bufferToInt(r.number))return n("invalid heigth");if(o.bufferToInt(r.timestamp)<=o.bufferToInt(a.header.timestamp))return n("invalid timestamp");const c=r._common.hardfork()?r._common.hardfork():r._common.activeHardfork(e);if(r.extraData.length>r._common.param("vm","maxExtraDataSize",c))return n("invalid amount of extra data");n()}))},a.prototype.hash=function(){return o.rlphash(this.raw)},a.prototype.isGenesis=function(){return""===this.number.toString("hex")},a.prototype.setGenesisParams=function(){this.timestamp=this._common.genesis().timestamp,this.gasLimit=this._common.genesis().gasLimit,this.difficulty=this._common.genesis().difficulty,this.extraData=this._common.genesis().extraData,this.nonce=this._common.genesis().nonce,this.stateRoot=this._common.genesis().stateRoot,this.number=e.from([])}}).call(this,n(3).Buffer)},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MaticPOSClient=void 0;var c=s(n(17)),u=n(22),f=s(n(27)),l=s(n(28)),h=s(n(60)),d=s(n(61)),p=s(n(62)),b=n(8),m=function(t){function e(e){void 0===e&&(e={});var n=this;return e.network=c.default.initializeNetwork(e.network,e.version),e.rootChain||(e.rootChain=e.network.Main.Contracts.RootChainProxy),(n=t.call(this,e)||this).rootChain=new d.default(e,n.web3Client),n.posRootChainManager=new l.default(e,n.rootChain,n.web3Client),n}return o(e,t),e.prototype.approveERC20ForDeposit=function(t,e,n){if(n&&(!n.from||!e||!t))throw new Error("options.from, rootToken or amount is missing");return this.posRootChainManager.approveERC20(t,e,n)},e.prototype.approveMaxERC20ForDeposit=function(t,e){if(e&&(!e.from||!t))throw new Error("options.from, rootToken is missing");return this.posRootChainManager.approveMaxERC20(t,e)},e.prototype.getERC20Allowance=function(t,e,n){if(n&&(!e||!t))throw new Error("user address, token is missing");return this.posRootChainManager.allowanceOfERC20(t,e,n)},e.prototype.depositERC20ForUser=function(t,e,n,r){if(r&&(!r.from||!n||!t||!e))throw new Error("options.from, rootToken, user, or amount is missing");return this.posRootChainManager.depositERC20ForUser(t,n,e,r)},e.prototype.depositEtherForUser=function(t,e,n){if(n&&(!n.from||!e||!t))throw new Error("options.from, user or amount is missing");return this.posRootChainManager.depositEtherForUser(e,t,n)},e.prototype.burnERC20=function(t,e,n){if(!this.web3Client.web3.utils.isAddress(t))throw new Error(t+" is not a valid token address");if(!e)throw new Error(e+" is not a amount");if(n&&!n.from)throw new Error("options.from is missing");return this.posRootChainManager.burnERC20(t,e,n)},e.prototype.exitERC20=function(t,e){if(!t)throw new Error("txHash not provided");if(e&&!e.from)throw new Error("from missing");return e&&e.legacyProof?this.posRootChainManager.exitERC20(t,e):this.posRootChainManager.exitERC20Hermoine(t,e)},e.prototype.isERC20ExitProcessed=function(t){if(!t)throw new Error("txHash not provided");return this.posRootChainManager.isERC20ExitProcessed(t)},e.prototype.approveERC721ForDeposit=function(t,e,n){if(n&&(!n.from||!e||!t))throw new Error("options.from, rootToken or tokenId is missing");return this.posRootChainManager.approveERC721(t,e,n)},e.prototype.isApprovedERC721ForDeposit=function(t,e,n){if(n&&(!n.from||!e||!t))throw new Error("options.from, rootToken or tokenId is missing");return this.posRootChainManager.isApprovedERC721(t,e,n)},e.prototype.approveAllERC721ForDeposit=function(t,e){if(e&&(!e.from||!t))throw new Error("options.from, rootToken is missing");return this.posRootChainManager.approveAllERC721(t,e)},e.prototype.isApprovedAllERC721ForDeposit=function(t,e,n){if(n&&(!n.from||!t))throw new Error("options.from, rootToken is missing");return this.posRootChainManager.isApprovedForAllERC721(t,e,n)},e.prototype.depositERC721ForUser=function(t,e,n,r){if(r&&(!r.from||!n||!t||!e))throw new Error("options.from, rootToken, user, or tokenId is missing");return this.posRootChainManager.depositERC721ForUser(t,n,e,r)},e.prototype.depositBatchERC721ForUser=function(t,e,n,r){if(r&&(!r.from||!n||!t||!e))throw new Error("options.from, rootToken, user, or tokenIds is missing");if(n.length>20)throw new Error("Number of tokens being deposited can not exceed the limit of 20");return this.posRootChainManager.depositBatchERC721ForUser(t,n,e,r)},e.prototype.burnERC721=function(t,e,n){if(!this.web3Client.web3.utils.isAddress(t))throw new Error(t+" is not a valid token address");if(!e)throw new Error(e+" is not a tokenId");if(n&&!n.from)throw new Error("options.from is missing");return this.posRootChainManager.burnERC721(t,e,n)},e.prototype.burnBatchERC721=function(t,e,n){if(!this.web3Client.web3.utils.isAddress(t))throw new Error(t+" is not a valid token address");if(!e)throw new Error("tokenIds is missing");if(e.length>20)throw new Error("Number of tokens being withdrawn can not exceed the limit of 20");if(n&&!n.from)throw new Error("options.from is missing");return this.posRootChainManager.burnBatchERC721(t,e,n)},e.prototype.exitERC721=function(t,e){if(!t)throw new Error("txHash not provided");if(e&&!e.from)throw new Error("options.from is missing");return e&&e.legacyProof?this.posRootChainManager.exitERC721(t,e):this.posRootChainManager.exitERC721Hermoine(t,e)},e.prototype.exitBatchERC721=function(t,e){if(!t)throw new Error("txHash not provided");if(e&&!e.from)throw new Error("options.from is missing");return e&&e.legacyProof?this.posRootChainManager.exitBatchERC721(t,e):this.posRootChainManager.exitBatchERC721Hermoine(t,e)},e.prototype.exitERC721WithMetadata=function(t,e){if(!t)throw new Error("txHash not provided");if(e&&!e.from)throw new Error("options.from is missing");return e&&e.legacyProof?this.posRootChainManager.exitERC721WithMetadata(t,e):this.posRootChainManager.exitERC721WithMetadataHermoine(t,e)},e.prototype.isERC721ExitProcessed=function(t){if(!t)throw new Error("txHash not provided");return this.posRootChainManager.isERC721ExitProcessed(t)},e.prototype.isBatchERC721ExitProcessed=function(t){if(!t)throw new Error("txHash not provided");return this.posRootChainManager.isBatchERC721ExitProcessed(t)},e.prototype.approveERC1155ForDeposit=function(t,e){if(e&&(!e.from||!t))throw new Error("options.from or rootToken is missing");return this.posRootChainManager.approveERC1155(t,e)},e.prototype.approveMintableERC1155ForDeposit=function(t,e){if(e&&(!e.from||!t))throw new Error("options.from or rootToken is missing");return this.posRootChainManager.approveMintableERC1155(t,e)},e.prototype.depositSingleERC1155ForUser=function(t,e,n,r,o,i){if(i&&(!i.from||!n||!r||!t||!e))throw new Error("options.from, rootToken, user, tokenId or amount is missing");return this.posRootChainManager.depositSingleERC1155ForUser(t,n,r,e,o,i)},e.prototype.depositBatchERC1155ForUser=function(t,e,n,r,o,i){if(i&&(!i.from||!n||!t||!e))throw new Error("options.from, rootToken, user, tokenIds or amounts is missing");return this.posRootChainManager.depositBatchERC1155ForUser(t,n,r,e,o,i)},e.prototype.burnSingleERC1155=function(t,e,n,r){if(!this.web3Client.web3.utils.isAddress(t))throw new Error(t+" is not a valid token address");if(!e||!n)throw new Error("tokenId or amount is missing");if(r&&!r.from)throw new Error("options.from is missing");return this.posRootChainManager.burnSingleERC1155(t,e,n,r)},e.prototype.burnBatchERC1155=function(t,e,n,r){if(!this.web3Client.web3.utils.isAddress(t))throw new Error(t+" is not a valid token address");if(!e||!n)throw new Error("tokenIds or amounts missing");if(r&&!r.from)throw new Error("options.from is missing");return this.posRootChainManager.burnBatchERC1155(t,e,n,r)},e.prototype.exitSingleERC1155=function(t,e){if(!t)throw new Error("txHash not provided");if(e&&!e.from)throw new Error("options.from is missing");return e&&e.legacyProof?this.posRootChainManager.exitSingleERC1155(t,e):this.posRootChainManager.exitSingleERC1155Hermoine(t,e)},e.prototype.isSingleERC1155ExitProcessed=function(t){if(!t)throw new Error("txHash not provided");return this.posRootChainManager.isSingleERC1155ExitProcessed(t)},e.prototype.exitBatchERC1155=function(t,e){if(!t)throw new Error("txHash not provided");if(e&&!e.from)throw new Error("options.from is missing");return e&&e.legacyProof?this.posRootChainManager.exitBatchERC1155(t,e):this.posRootChainManager.exitBatchERC1155Hermoine(t,e)},e.prototype.isBatchERC1155ExitProcessed=function(t){if(!t)throw new Error("txHash not provided");return this.posRootChainManager.isBatchERC1155ExitProcessed(t)},e}(c.default);e.MaticPOSClient=m;var g=function(t){function e(e){void 0===e&&(e={});var n=this,r=c.default.initializeNetwork(e.network,e.version);return(e=Object.assign({registry:r.Main.Contracts.Registry,rootChain:r.Main.Contracts.RootChainProxy,depositManager:r.Main.Contracts.DepositManagerProxy,withdrawManager:r.Main.Contracts.WithdrawManagerProxy},e)).network=r,(n=t.call(this,e)||this).registry=new h.default(e,n.web3Client),n.rootChain=new d.default(e,n.web3Client),n.depositManager=new f.default(e,n.web3Client,n.registry),n.withdrawManager=new p.default(e,n.rootChain,n.web3Client,n.registry),n.utils=new u.Utils,n}return o(e,t),e.prototype.initialize=function(){return Promise.all([this.withdrawManager.initialize(),this.depositManager.initialize()])},e.prototype.transferEther=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o,i,s,c,u;return a(this,(function(a){switch(a.label){case 0:if(n&&(!n.from||!e||!t))throw new Error("Missing Parameters");return r=n.from,o=this.encode(e),n.parent?[3,2]:[4,this.registry.registry.methods.getWethTokenAddress().call()];case 1:return i=a.sent(),[2,this.transferERC20Tokens(i,t,o,n)];case 2:return s=this.web3Client.getParentWeb3(),n.gas?[3,4]:(c=n,[4,s.eth.estimateGas({from:r,value:o})]);case 3:c.gas=a.sent(),a.label=4;case 4:return Object.assign(n,{value:o,to:t}),[4,this.web3Client.fillOptions(n,!0,n)];case 5:return[2,(u=a.sent()).encodeAbi?u:this.web3Client.wrapWeb3Promise(s.eth.sendTransaction(u),n)]}}))}))},e.prototype.depositEther=function(t,e){if(e&&(!e.from||!t))throw new Error("options.from or amount is missing");return this.depositManager.depositEther(t,e)},e.prototype.depositStatusFromTxHash=function(t){if(!t)throw new Error("txHash is missing");return this.depositManager.depositStatusFromTxHash(t)},e.prototype.approveERC20TokensForDeposit=function(t,e,n){if(n&&(!n.from||!e||!t))throw new Error("options.from, token or amount is missing");return this.depositManager.approveERC20(t,e,n)},e.prototype.approveMaxERC20TokensForDeposit=function(t,e){if(e&&(!e.from||!t))throw new Error("options.from, token is missing");return this.depositManager.approveMaxERC20(t,e)},e.prototype.getERC20Allowance=function(t,e,n){if(n&&(!e||!t))throw new Error("user address, token is missing");return this.depositManager.allowanceOfERC20(t,e,n)},e.prototype.getTransferSignature=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o,i,s,c,u;return a(this,(function(a){switch(a.label){case 0:if(!t.orderId||!t.spender)throw new Error("orderId or spender missing from sell order");if(!n.from)throw new Error("options.from is missing");return r={token:e.token,amount:e.amount,id:t.orderId,expiration:t.expiry},o=this.utils.getOrderHash(r),[4,this.web3Client.web3.eth.net.getId()];case 1:return i=a.sent(),s={token:t.token,tokenIdOrAmount:t.amount,spender:t.spender,data:o,expiration:t.expiry,chainId:i},c=this.utils.getTypedData(s),u=this.web3Client.getWallet(),[2,this.utils.signEIP712TypedData(c,u[n.from].privateKey)]}}))}))},e.prototype.transferWithSignature=function(t,e,n,r,o){return i(this,void 0,void 0,(function(){var i,s,c,u;return a(this,(function(a){switch(a.label){case 0:if(!o.from)throw new Error("options.from is missing");return i=this.web3Client.web3.utils,s=i.soliditySha3({t:"bytes32",v:e.orderId},{t:"address",v:n.token},{t:"uint256",v:n.amount}),c=this.getERC721TokenContract(e.token).methods.transferWithSig(t,e.amount,s,e.expiry,r),[4,this.web3Client.fillOptions(c,!1,o)];case 1:return u=a.sent(),[2,this.web3Client.send(c,u,o)]}}))}))},e.prototype.depositERC20ForUser=function(t,e,n,r){if(r&&(!r.from||!n||!t))throw new Error("options.from, token or amount is missing");return this.depositManager.depositERC20ForUser(t,n,e,r)},e.prototype.safeDepositERC721Tokens=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o;return a(this,(function(i){switch(i.label){case 0:if(!(n&&n.from&&e&&t))throw new Error("options.from, token or tokenId is missing");return r=this.getERC721TokenContract(t,!0).methods.safeTransferFrom(n.from,this.depositManager.getAddress(),e),[4,this.web3Client.fillOptions(r,!0,n)];case 1:return(o=i.sent()).encodeAbi?[2,Object.assign(o,{data:r.encodeABI(),to:t})]:[2,this.web3Client.send(r,o,n)]}}))}))},e.prototype.startWithdraw=function(t,e,n){return this._validateInputs(t,e,n),this.withdrawManager.burnERC20Tokens(t,e,n)},e.prototype.startWithdrawForNFT=function(t,e,n){return this._validateInputs(t,e,n),this.withdrawManager.burnERC721Token(t,e,n)},e.prototype.withdraw=function(t,e){if(!t)throw new Error("txHash not provided");if(e&&!e.from)throw new Error("options.from is missing");return e&&e.legacyProof?this.withdrawManager.startExitWithBurntERC20Tokens(t,e):this.withdrawManager.startExitWithBurntERC20TokensHermoine(t,e)},e.prototype.withdrawNFT=function(t,e){if(!t)throw new Error("txHash not provided");if(e&&!e.from)throw new Error("options.from is missing");return e&&e.legacyProof?this.withdrawManager.startExitWithBurntERC721Tokens(t,e):this.withdrawManager.startExitWithBurntERC721TokensHermoine(t,e)},e.prototype.processExits=function(t,e){return this.withdrawManager.processExits(t,e)},e.prototype._validateInputs=function(t,e,n){if(!this.web3Client.web3.utils.isAddress(this.web3Client.web3.utils.toChecksumAddress(t)))throw new Error(t+" is not a valid token address");if(!e)throw new Error(e+" is not a amountOrTokenId");if(n&&!n.from)throw new Error("options.from is missing")},e.MaticPOSClient=m,e.mapPromise=b.mapPromise,e}(c.default);e.default=g},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=s(n(18)),u=s(n(2)),f=s(n(19)),l=function(t){function e(e){void 0===e&&(e={});var n=new f.default(e.parentProvider||e.network.Main.RPC,e.maticProvider||e.network.Matic.RPC,e.parentDefaultOptions||{},e.maticDefaultOptions||{},e.network.Main.SupportsEIP1559,e.network.Matic.SupportsEIP1559);return t.call(this,n,e.network)||this}return o(e,t),e.initializeNetwork=function(t,e){void 0===t&&(t="testnet"),void 0===e&&(e="mumbai");var n=new c.default(t,e);if(!n)throw new Error("network "+t+" - "+e+" is not supported");return n},e.prototype.setWallet=function(t){this.web3Client.wallet=t},e.prototype.balanceOfERC20=function(t,e,n){return void 0===n&&(n={}),i(this,void 0,void 0,(function(){return a(this,(function(r){if(!e||!t)throw new Error("token address or user address is missing");return[2,this.getERC20TokenContract(e,n.parent).methods.balanceOf(t).call()]}))}))},e.prototype.balanceOfERC721=function(t,e,n){return void 0===n&&(n={}),i(this,void 0,void 0,(function(){return a(this,(function(r){if(n&&(!e||!t))throw new Error("token address or user address is missing");return[2,this.getERC721TokenContract(e,n.parent).methods.balanceOf(t).call()]}))}))},e.prototype.tokenOfOwnerByIndexERC721=function(t,e,n,r){return i(this,void 0,void 0,(function(){return a(this,(function(o){if(r&&(!e||!t))throw new Error("token address or user address is missing");return[2,this.getERC721TokenContract(e,r.parent).methods.tokenOfOwnerByIndex(t,n).call()]}))}))},e.prototype.transferERC20Tokens=function(t,e,n,r){return i(this,void 0,void 0,(function(){var o,i,s;return a(this,(function(a){switch(a.label){case 0:if(r&&(!r.from||!n||!t||!e))throw new Error("options.from, to, token or amount is missing");return o=this.getERC20TokenContract(t,r.parent).methods.transfer(e,this.encode(n)),i=!!r.parent,[4,this.web3Client.fillOptions(o,i,r)];case 1:return(s=a.sent()).encodeAbi?[2,Object.assign(s,{data:o.encodeABI(),to:t})]:[2,this.web3Client.send(o,s,r)]}}))}))},e.prototype.transferERC721Tokens=function(t,e,n,r){return i(this,void 0,void 0,(function(){var o,i,s;return a(this,(function(a){switch(a.label){case 0:if(r&&(!r.from||!n||!t||!e))throw new Error("options.from, to, token or tokenId is missing");return o=this.getERC721TokenContract(t,r.parent).methods.transferFrom(r.from,e,n),i=!!r.parent,[4,this.web3Client.fillOptions(o,i,r)];case 1:return(s=a.sent()).encodeAbi?[2,Object.assign(s,{data:o.encodeABI(),to:t})]:[2,this.web3Client.send(o,s,r)]}}))}))},e.prototype.transferERC1155Tokens=function(t,e,n,r,o){return i(this,void 0,void 0,(function(){var i,s;return a(this,(function(a){switch(a.label){case 0:if(!o||!o.from)throw new Error("options.from is missing");if(!(e&&t&&n&&r))throw new Error("to address, token, tokenId or value are missing");if(n.length!==r.length)throw new Error("Token ids and values arrays are not equal in length");return Object.assign(o,{to:e}),i=n.length>1?this.getPOSERC1155TokenContract(t,!0).methods.safeBatchTransferFrom(o.from,e,n,r,"0x"):this.getPOSERC1155TokenContract(t,!0).methods.safeTransferFrom(o.from,e,n,r,"0x"),[4,this.web3Client.fillOptions(i,!0,o)];case 1:return(s=a.sent()).encodeAbi?[2,Object.assign(s,{data:i.encodeABI(),to:t})]:[2,this.web3Client.send(i,s,o)]}}))}))},e.prototype.transferMaticEth=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o,i;return a(this,(function(a){switch(a.label){case 0:if(n&&(!n.from||!e||!t))throw new Error("options.from, to or amount is missing");return r=u.default.MATIC_CHILD_TOKEN,o=this.getChildMaticContract().methods.transfer(t,this.encode(e)),n.value=this.encode(e),[4,this.web3Client.fillOptions(o,!1,n)];case 1:return(i=a.sent()).encodeAbi?[2,Object.assign(i,{data:o.encodeABI(),to:r})]:[2,this.web3Client.send(o,i,n)]}}))}))},e}(u.default);e.default=l},function(t,e){t.exports=a},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(7)),s={info:n(0)("maticjs:Web3Client"),debug:n(0)("maticjs:debug:Web3Client")},c=function(){function t(t,e,n,r,o,i){this.parentWeb3=new a.default(t),this.web3=new a.default(e),this.parentDefaultOptions=n,this.maticDefaultOptions=r,this.parentSupportsEip1559=o,this.childSupportsEip1559=i,this.web3.extend({property:"bor",methods:[{name:"getRootHash",call:"eth_getRootHash",params:2,inputFormatter:[Number,Number],outputFormatter:String}]})}return Object.defineProperty(t.prototype,"wallet",{set:function(t){this.parentWeb3.eth.accounts.wallet.add(t),this.web3.eth.accounts.wallet.add(t)},enumerable:!1,configurable:!0}),t.prototype.call=function(t,e){return r(this,void 0,void 0,(function(){return o(this,(function(n){return[2,t.call(e||this.parentDefaultOptions)]}))}))},t.prototype.fillOptions=function(t,e,n){return r(this,void 0,void 0,(function(){return o(this,(function(r){if(e){if(!this.parentSupportsEip1559&&(n.maxFeePerGas||n.maxPriorityFeePerGas))throw new Error("Root chain doesn't support eip-1559");return[2,this._fillOptions(t,this.parentWeb3,n||this.parentDefaultOptions,this.parentSupportsEip1559)]}if(!this.childSupportsEip1559&&(n.maxFeePerGas||n.maxPriorityFeePerGas))throw new Error("Child chain doesn't support eip-1559");return[2,this._fillOptions(t,this.web3,n||this.maticDefaultOptions,this.childSupportsEip1559)]}))}))},t.prototype._fillOptions=function(t,e,n,i){return r(this,void 0,void 0,(function(){var r,a,s,c,u,f,l,h;return o(this,(function(o){switch(o.label){case 0:if(!n.from)throw new Error("from is not specified");return r=n.from,a=n.maxPriorityFeePerGas?n.maxPriorityFeePerGas:1e9,delete t.chainId,[4,Promise.all([n.gasLimit||n.gas?n.gasLimit||n.gas:t.estimateGas({from:r,value:n.value}),n.maxFeePerGas?n.maxFeePerGas:void 0,n.gasPrice?n.gasPrice:e.eth.getGasPrice(),n.nonce?n.nonce:e.eth.getTransactionCount(r,"pending"),n.chainId?n.chainId:e.eth.net.getId()])];case 1:return s=o.sent(),c=s[0],u=s[1],f=s[2],l=s[3],h=s[4],i&&!n.gasPrice?[2,{from:r,gas:c,gasLimit:c,maxFeePerGas:u,maxPriorityFeePerGas:a,nonce:l,chainId:h,value:n.value||0,to:n.to||null,data:n.data,encodeAbi:n.encodeAbi||!1}]:[2,{from:r,gas:c,gasLimit:c,gasPrice:f,nonce:l,chainId:h,value:n.value||0,to:n.to||null,data:n.data,encodeAbi:n.encodeAbi||!1}]}}))}))},t.prototype.wrapWeb3Promise=function(t,e){return e&&(e.onTransactionHash&&t.on("transactionHash",e.onTransactionHash),e.onReceipt&&t.on("receipt",e.onReceipt),e.onConfirmation&&t.on("confirmation",e.onConfirmation),e.onError&&t.on("error",e.onError)),t},t.prototype.send=function(t,e,n){var r=e||{};return e.parent?r.gas=(r.gas||this.parentDefaultOptions.gas)+1e6:r.gas=r.gas||this.maticDefaultOptions.gas,s.debug("sending tx with",{_web3Options:r}),this.wrapWeb3Promise(t.send(r),n)},t.prototype.getParentWeb3=function(){return this.parentWeb3},t.prototype.getMaticWeb3=function(){return this.web3},t.prototype.getWallet=function(){return this.web3.eth.accounts.wallet},t.prototype.setParentDefaultOptions=function(t){this.parentDefaultOptions=t},t.prototype.setMaticDefaultOptions=function(t){this.maticDefaultOptions=t},t.prototype.setParentProvider=function(t){this.parentWeb3=new a.default(t)},t}();e.default=c},function(t,e,n){t.exports=function(t){function e(t){let n,o,i,a=null;function s(...t){if(!s.enabled)return;const r=s,o=Number(new Date),i=o-(n||o);r.diff=i,r.prev=n,r.curr=o,n=o,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(n,o)=>{if("%%"===n)return"%";a++;const i=e.formatters[o];if("function"==typeof i){const e=t[a];n=i.call(r,e),t.splice(a,1),a--}return n}),e.formatArgs.call(r,t);(r.log||e.log).apply(r,t)}return s.namespace=t,s.useColors=e.useColors(),s.color=e.selectColor(t),s.extend=r,s.destroy=e.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(o!==e.namespaces&&(o=e.namespaces,i=e.enabled(t)),i),set:t=>{a=t}}),"function"==typeof e.init&&e.init(s),s}function r(t,n){const r=e(this.namespace+(void 0===n?":":n)+t);return r.log=this.log,r}function o(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(o),...e.skips.map(o).map(t=>"-"+t)].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(21),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(n=>{e[n]=t[n]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},function(t,e){var n=1e3,r=6e4,o=60*r,i=24*o;function a(t,e,n,r){var o=e>=1.5*n;return Math.round(t/n)+" "+r+(o?"s":"")}t.exports=function(t,e){e=e||{};var s=typeof t;if("string"===s&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*o;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(t);if("number"===s&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=i)return a(t,e,i,"day");if(e>=o)return a(t,e,o,"hour");if(e>=r)return a(t,e,r,"minute");if(e>=n)return a(t,e,n,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=i)return Math.round(t/i)+"d";if(e>=o)return Math.round(t/o)+"h";if(e>=r)return Math.round(t/r)+"m";if(e>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){"use strict";(function(t){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Utils=void 0;var o=n(26),i=r(n(1)),a=function(){function e(){}return e.prototype.getOrderHash=function(e){var n=t.concat([i.default.toBuffer(e.id),i.default.toBuffer(e.token),i.default.setLengthLeft(e.amount,32)]);return i.default.keccak256(n)},e.prototype.getTypedData=function(t){var e=t.token,n=t.spender,r=t.tokenIdOrAmount,o=t.data,i=t.expiration;return{types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"contract",type:"address"}],TokenTransferOrder:[{name:"spender",type:"address"},{name:"tokenIdOrAmount",type:"uint256"},{name:"data",type:"bytes32"},{name:"expiration",type:"uint256"}]},domain:{name:"Matic Network",version:"1",chainId:t.chainId,contract:e},primaryType:"TokenTransferOrder",message:{spender:n,tokenIdOrAmount:r,data:o,expiration:i}}},e.prototype.signEIP712TypedData=function(t,e){return o.signTypedData(i.default.toBuffer(e),{data:t})},e}();e.Utils=a}).call(this,n(3).Buffer)},function(t,e,n){"use strict";e.byteLength=function(t){var e=u(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=u(t),a=r[0],s=r[1],c=new i(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),f=0,l=s>0?a-4:a;for(n=0;n<l;n+=4)e=o[t.charCodeAt(n)]<<18|o[t.charCodeAt(n+1)]<<12|o[t.charCodeAt(n+2)]<<6|o[t.charCodeAt(n+3)],c[f++]=e>>16&255,c[f++]=e>>8&255,c[f++]=255&e;2===s&&(e=o[t.charCodeAt(n)]<<2|o[t.charCodeAt(n+1)]>>4,c[f++]=255&e);1===s&&(e=o[t.charCodeAt(n)]<<10|o[t.charCodeAt(n+1)]<<4|o[t.charCodeAt(n+2)]>>2,c[f++]=e>>8&255,c[f++]=255&e);return c},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],a=0,s=n-o;a<s;a+=16383)i.push(f(t,a,a+16383>s?s:a+16383));1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],o[a.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function f(t,e,n){for(var o,i,a=[],s=e;s<n;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,o){var i,a,s=8*o-r-1,c=(1<<s)-1,u=c>>1,f=-7,l=n?o-1:0,h=n?-1:1,d=t[e+l];for(l+=h,i=d&(1<<-f)-1,d>>=-f,f+=s;f>0;i=256*i+t[e+l],l+=h,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=r;f>0;a=256*a+t[e+l],l+=h,f-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),i-=u}return(d?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,s,c,u=8*i-o-1,f=(1<<u)-1,l=f>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,p=r?1:-1,b=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+l>=1?h/c:h*Math.pow(2,1-l))*c>=2&&(a++,c/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(e*c-1)*Math.pow(2,o),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;t[n+d]=255&s,d+=p,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;t[n+d]=255&a,d+=p,a/=256,u-=8);t[n+d-p]|=128*b}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){t.exports=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=s(n(2)),u=n(8),f=function(t){function e(e,n,r){var o=t.call(this,n,e.network)||this;return o.depositManagerContract=new o.web3Client.parentWeb3.eth.Contract(e.network.abi("DepositManager"),e.depositManager),o.registry=r,o}return o(e,t),e.prototype.initialize=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return[4,this.registry.registry.methods.getChildChainAndStateSender().call()];case 1:return t=e.sent()[0],this.childChainContract=new this.web3Client.web3.eth.Contract(this.network.abi("ChildChain"),t),[2]}}))}))},e.prototype.depositStatusFromTxHash=function(t){return i(this,void 0,void 0,(function(){var n,r,o,s=this;return a(this,(function(c){switch(c.label){case 0:return n=[],[4,this.web3Client.parentWeb3.eth.getTransactionReceipt(t)];case 1:if(!(r=c.sent()))throw new Error("Transaction hash not found");return(o=r.logs.filter((function(t){return t.topics[0].toLowerCase()===e.NEW_DEPOSIT_EVENT_SIG}))).length>0?[4,u.mapPromise(o,(function(t){return i(s,void 0,void 0,(function(){var e,r,o,i,s;return a(this,(function(a){switch(a.label){case 0:return e=t.data,r="0x"+e.substring(e.length-64),i=(o=n).push,s={depositId:r},[4,this.isDepositProcessed(r)];case 1:return i.apply(o,[(s.isProcessed=a.sent(),s)]),[2]}}))}))}))]:[3,3];case 2:c.sent(),c.label=3;case 3:return[2,{receipt:r,deposits:n}]}}))}))},e.prototype.isDepositProcessed=function(t){return this.childChainContract.methods.deposits(t).call()},e.prototype.approveERC20=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o;return a(this,(function(i){switch(i.label){case 0:return r=this.getERC20TokenContract(t,!0).methods.approve(this.depositManagerContract.options.address,this.encode(e)),[4,this.web3Client.fillOptions(r,!0,n)];case 1:return(o=i.sent()).encodeAbi?[2,Object.assign(o,{data:r.encodeABI(),to:t})]:[2,this.web3Client.send(r,o,n)]}}))}))},e.prototype.approveMaxERC20=function(t,e){return i(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return n=this.getERC20TokenContract(t,!0).methods.approve(this.depositManagerContract.options.address,"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),[4,this.web3Client.fillOptions(n,!0,e)];case 1:return(r=o.sent()).encodeAbi?[2,Object.assign(r,{data:n.encodeABI(),to:t})]:[2,this.web3Client.send(n,r,e)]}}))}))},e.prototype.allowanceOfERC20=function(t,e,n){return i(this,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:if(n&&(!e||!t))throw new Error("token address or user address is missing");return[4,this.getERC20TokenContract(e,!0).methods.allowance(t,this.depositManagerContract.options.address).call()];case 1:return[2,r.sent()]}}))}))},e.prototype.depositERC20=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o;return a(this,(function(i){switch(i.label){case 0:return r=this.depositManagerContract.methods.depositERC20(t,this.encode(e)),[4,this.web3Client.fillOptions(r,!0,n)];case 1:return(o=i.sent()).encodeAbi?[2,Object.assign(o,{data:r.encodeABI(),to:this.depositManagerContract.options.address})]:[2,this.web3Client.send(r,o,n)]}}))}))},e.prototype.depositERC721=function(t,e,n){return this.web3Client.send(this.depositManagerContract.methods.depositERC721(t,e),n)},e.prototype.depositBulk=function(t,e,n,r){return this.web3Client.send(this.depositManagerContract.methods.depositBulk(t,e,n),r)},e.prototype.depositERC20ForUser=function(t,e,n,r){return i(this,void 0,void 0,(function(){var o,i;return a(this,(function(a){switch(a.label){case 0:return o=this.depositManagerContract.methods.depositERC20ForUser(t,n,this.encode(e)),[4,this.web3Client.fillOptions(o,!0,r)];case 1:return(i=a.sent()).encodeAbi?[2,Object.assign(i,{data:o.encodeABI(),to:this.depositManagerContract.options.address})]:[2,this.web3Client.send(o,i,r)]}}))}))},e.prototype.depositERC721ForUser=function(t,e,n,r){return this.web3Client.send(this.depositManagerContract.methods.depositERC721ForUser(t,n,e),r)},e.prototype.depositEther=function(t,e){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return n=this.depositManagerContract.methods.depositEther(),[4,this.web3Client.fillOptions(n,!0,Object.assign(e,{value:this.encode(t)}))];case 1:return(r=o.sent()).encodeAbi?[2,Object.assign(r,{data:n.encodeABI(),to:this.depositManagerContract.options.address})]:[2,this.web3Client.send(n,r,e)]}}))}))},e.prototype.getAddress=function(){return this.depositManagerContract.options.address},e.NEW_DEPOSIT_EVENT_SIG="0x1dadc8d0683c6f9824e885935c1bec6f76816730dcec148dda8cf25a7b9f797b",e}(c.default);e.default=f},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=s(n(7)),u=s(n(2)),f=s(n(10)),l="0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef",h="0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef",d="0xf871896b17e9cb7a64941c62c188a4f5c621b86800e3d15452ece01ce56073df",p="0xc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62",b="0x4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb",m=(new c.default).eth.abi,g=function(t){function e(e,n,r){var o=t.call(this,r,e.network)||this;return o.formatUint256=o.encode,o.posRootChainManager=new o.web3Client.parentWeb3.eth.Contract(e.network.abi("RootChainManager","pos"),e.posRootChainManager||e.network.Main.POSContracts.RootChainManagerProxy),o.rootTunnelContractAbi=e.network.abi("RootTunnel","pos"),o.exitManager=new f.default(n,e,r),o.erc20Predicate=e.posERC20Predicate||e.network.Main.POSContracts.ERC20PredicateProxy,o.erc721Predicate=e.posERC721Predicate||e.network.Main.POSContracts.ERC721PredicateProxy,o.erc1155Predicate=e.posERC1155Predicate||e.network.Main.POSContracts.ERC1155PredicateProxy,o.erc1155MintablePredicate=e.posMintableERC1155Predicate||e.network.Main.POSContracts.MintableERC1155PredicateProxy,o.requestConcurrency=e.requestConcurrency,o}return o(e,t),e.prototype.getPredicateAddress=function(t){return i(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return[4,this.posRootChainManager.methods.tokenToType(t).call()];case 1:if(!(e=n.sent()))throw new Error("Invalid Token Type");return[4,this.posRootChainManager.methods.typeToPredicate(e).call()];case 2:return[2,n.sent()]}}))}))},e.prototype.depositEtherForUser=function(t,e,n){return void 0===n&&(n={}),i(this,void 0,void 0,(function(){var r,o;return a(this,(function(i){switch(i.label){case 0:return r=this.posRootChainManager.methods.depositEtherFor(e),[4,this.web3Client.fillOptions(r,!0,Object.assign(n,{value:this.formatUint256(t)}))];case 1:return(o=i.sent()).encodeAbi?[2,Object.assign(o,{data:r.encodeABI(),to:this.posRootChainManager.options.address})]:[2,this.web3Client.send(r,o,n)]}}))}))},e.prototype.depositFor=function(t,e,n,r){return i(this,void 0,void 0,(function(){var o,i;return a(this,(function(a){switch(a.label){case 0:if(!this.posRootChainManager.options.address)throw new Error("posRootChainManager address not found. Set it while constructing MaticPOSClient.");return o=this.posRootChainManager.methods.depositFor(t,e,n),[4,this.web3Client.fillOptions(o,!0,r)];case 1:return(i=a.sent()).encodeAbi?[2,Object.assign(i,{data:o.encodeABI(),to:this.posRootChainManager.options.address})]:[2,this.web3Client.send(o,i,r)]}}))}))},e.prototype.exit=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o,i;return a(this,(function(a){switch(a.label){case 0:if(!this.posRootChainManager.options.address)throw new Error("posRootChainManager address not found. Set it while constructing MaticPOSClient.");return[4,this.exitManager.buildPayloadForExit(t,e,this.requestConcurrency)];case 1:return r=a.sent(),o=this.posRootChainManager.methods.exit(r),[4,this.web3Client.fillOptions(o,!0,n)];case 2:return(i=a.sent()).encodeAbi?[2,Object.assign(i,{data:o.encodeABI(),to:this.posRootChainManager.options.address})]:[2,this.web3Client.send(o,i,n)]}}))}))},e.prototype.exitFastMerkle=function(t,e,n){return i(this,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:return[4,this.exitManager.buildPayloadForExitFastMerkle(t,e,n)];case 1:return[2,r.sent()]}}))}))},e.prototype.exitHermoine=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o,i;return a(this,(function(a){switch(a.label){case 0:if(!this.posRootChainManager.options.address)throw new Error("posRootChainManager address not found. Set it while constructing MaticPOSClient.");return[4,this.exitManager.buildPayloadForExitHermoine(t,e)];case 1:return r=a.sent(),o=this.posRootChainManager.methods.exit(r),[4,this.web3Client.fillOptions(o,!0,n)];case 2:return(i=a.sent()).encodeAbi?[2,Object.assign(i,{data:o.encodeABI(),to:this.posRootChainManager.options.address})]:[2,this.web3Client.send(o,i,n)]}}))}))},e.prototype.getERC20ExitPayload=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.exitManager.buildPayloadForExit(t,l)];case 1:return[2,e.sent()]}}))}))},e.prototype.isExitProcessed=function(t,e){return i(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return[4,this.exitManager.getExitHash(t,e,this.requestConcurrency)];case 1:return n=r.sent(),[2,this.posRootChainManager.methods.processedExits(n).call()]}}))}))},e.prototype.processReceivedMessage=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o,i,s;return a(this,(function(a){switch(a.label){case 0:return[4,this.exitManager.buildPayloadForExitHermoine(e,"0x8c5261668696ce22758910d05bab8f186d6eb247ceac2af2e82c7dc17669b036")];case 1:return r=a.sent(),o=new this.web3Client.parentWeb3.eth.Contract(this.rootTunnelContractAbi,t),i=o.methods.receiveMessage(r),[4,this.web3Client.fillOptions(i,!0,n)];case 2:return(s=a.sent()).encodeAbi?[2,Object.assign(s,{data:i.encodeABI(),to:this.posRootChainManager.options.address})]:[2,this.web3Client.send(i,s,n)]}}))}))},e.prototype.customPayload=function(t,e){return i(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return[4,this.exitManager.buildPayloadForExitHermoine(t,e)];case 1:return[2,n.sent()]}}))}))},e.prototype.approveERC20=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o,i;return a(this,(function(a){switch(a.label){case 0:return[4,this.getPredicateAddress(t)];case 1:return r=a.sent(),o=this.getPOSERC20TokenContract(t,!0).methods.approve(r,this.formatUint256(e)),[4,this.web3Client.fillOptions(o,!0,n)];case 2:return(i=a.sent()).encodeAbi?[2,Object.assign(i,{data:o.encodeABI(),to:t})]:[2,this.web3Client.send(o,i,n)]}}))}))},e.prototype.approveMaxERC20=function(t,e){return i(this,void 0,void 0,(function(){var n,r,o;return a(this,(function(i){switch(i.label){case 0:return[4,this.getPredicateAddress(t)];case 1:return n=i.sent(),r=this.getPOSERC20TokenContract(t,!0).methods.approve(n,"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),[4,this.web3Client.fillOptions(r,!0,e)];case 2:return(o=i.sent()).encodeAbi?[2,Object.assign(o,{data:r.encodeABI(),to:t})]:[2,this.web3Client.send(r,o,e)]}}))}))},e.prototype.allowanceOfERC20=function(t,e,n){return i(this,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:if(n&&(!e||!t))throw new Error("token address or user address is missing");return[4,this.getPredicateAddress(e)];case 1:return r=o.sent(),[4,this.getPOSERC20TokenContract(e,!0).methods.allowance(t,r).call()];case 2:return[2,o.sent()]}}))}))},e.prototype.depositERC20ForUser=function(t,e,n,r){return i(this,void 0,void 0,(function(){var o;return a(this,(function(i){return o=m.encodeParameter("uint256",this.formatUint256(e)),[2,this.depositFor(n,t,o,r)]}))}))},e.prototype.burnERC20=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o,i;return a(this,(function(a){switch(a.label){case 0:return r=this.getPOSERC20TokenContract(t),o=r.methods.withdraw(this.formatUint256(e)),[4,this.web3Client.fillOptions(o,!1,n)];case 1:return(i=a.sent()).encodeAbi?[2,Object.assign(i,{data:o.encodeABI(),to:t})]:[2,this.web3Client.send(o,i,n)]}}))}))},e.prototype.exitERC20=function(t,e){return i(this,void 0,void 0,(function(){return a(this,(function(n){return[2,this.exit(t,l,e)]}))}))},e.prototype.exitERC20Hermoine=function(t,e){return i(this,void 0,void 0,(function(){return a(this,(function(n){return[2,this.exitHermoine(t,l,e)]}))}))},e.prototype.isERC20ExitProcessed=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){return[2,this.isExitProcessed(t,l)]}))}))},e.prototype.approveERC721=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o,i;return a(this,(function(a){switch(a.label){case 0:return[4,this.getPredicateAddress(t)];case 1:return r=a.sent(),o=this.getPOSERC721TokenContract(t,!0).methods.approve(r,this.formatUint256(e)),[4,this.web3Client.fillOptions(o,!0,n)];case 2:return(i=a.sent()).encodeAbi?[2,Object.assign(i,{data:o.encodeABI(),to:t})]:[2,this.web3Client.send(o,i,n)]}}))}))},e.prototype.isApprovedERC721=function(t,e,n){return i(this,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:if(n&&!t)throw new Error("token address is missing");return[4,this.getPredicateAddress(t)];case 1:return r=o.sent(),[4,this.getPOSERC721TokenContract(t,!0).methods.getApproved(e).call()];case 2:return[2,o.sent()==r]}}))}))},e.prototype.approveAllERC721=function(t,e){return i(this,void 0,void 0,(function(){var n,r,o;return a(this,(function(i){switch(i.label){case 0:return[4,this.getPredicateAddress(t)];case 1:return n=i.sent(),r=this.getPOSERC721TokenContract(t,!0).methods.setApprovalForAll(n,!0),[4,this.web3Client.fillOptions(r,!0,e)];case 2:return(o=i.sent()).encodeAbi?[2,Object.assign(o,{data:r.encodeABI(),to:t})]:[2,this.web3Client.send(r,o,e)]}}))}))},e.prototype.isApprovedForAllERC721=function(t,e,n){return i(this,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:if(n&&!t)throw new Error("token address is missing");return[4,this.getPredicateAddress(t)];case 1:return r=o.sent(),[4,this.getPOSERC721TokenContract(t,!0).methods.isApprovedForAll(e,r).call()];case 2:return[2,o.sent()]}}))}))},e.prototype.depositERC721ForUser=function(t,e,n,r){return i(this,void 0,void 0,(function(){var o;return a(this,(function(i){return o=m.encodeParameter("uint256",this.formatUint256(e)),[2,this.depositFor(n,t,o,r)]}))}))},e.prototype.depositBatchERC721ForUser=function(t,e,n,r){return i(this,void 0,void 0,(function(){var o,i,s=this;return a(this,(function(a){return o=e.map((function(t){return s.formatUint256(t)})),i=m.encodeParameter("uint256[]",o),[2,this.depositFor(n,t,i,r)]}))}))},e.prototype.burnERC721=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o,i;return a(this,(function(a){switch(a.label){case 0:return r=this.getPOSERC721TokenContract(t),o=r.methods.withdraw(this.formatUint256(e)),[4,this.web3Client.fillOptions(o,!1,n)];case 1:return(i=a.sent()).encodeAbi?[2,Object.assign(i,{data:o.encodeABI(),to:t})]:[2,this.web3Client.send(o,i,n)]}}))}))},e.prototype.burnWithMetadataERC721=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o,i;return a(this,(function(a){switch(a.label){case 0:return r=this.getPOSERC721TokenContract(t),o=r.methods.withdraw(this.formatUint256(e)),[4,this.web3Client.fillOptions(o,!1,n)];case 1:return(i=a.sent()).encodeAbi?[2,Object.assign(i,{data:o.encodeAbi(),to:t})]:[2,this.web3Client.send(o,i,n)]}}))}))},e.prototype.burnBatchERC721=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o,i,s,c=this;return a(this,(function(a){switch(a.label){case 0:return r=e.map((function(t){return c.formatUint256(t)})),o=this.getPOSERC721TokenContract(t),i=o.methods.withdrawBatch(r),[4,this.web3Client.fillOptions(i,!1,n)];case 1:return(s=a.sent()).encodeAbi?[2,Object.assign(s,{data:i.encodeABI(),to:t})]:[2,this.web3Client.send(i,s)]}}))}))},e.prototype.exitERC721=function(t,e){return i(this,void 0,void 0,(function(){return a(this,(function(n){return[2,this.exit(t,h,e)]}))}))},e.prototype.exitBatchERC721=function(t,e){return i(this,void 0,void 0,(function(){return a(this,(function(n){return[2,this.exit(t,d,e)]}))}))},e.prototype.exitERC721WithMetadata=function(t,e){return i(this,void 0,void 0,(function(){return a(this,(function(n){return[2,this.exit(t,"0xf94915c6d1fd521cee85359239227480c7e8776d7caf1fc3bacad5c269b66a14",e)]}))}))},e.prototype.exitERC721WithMetadataHermoine=function(t,e){return i(this,void 0,void 0,(function(){return a(this,(function(n){return[2,this.exitHermoine(t,"0xf94915c6d1fd521cee85359239227480c7e8776d7caf1fc3bacad5c269b66a14",e)]}))}))},e.prototype.exitBatchERC721Hermoine=function(t,e){return i(this,void 0,void 0,(function(){return a(this,(function(n){return[2,this.exitHermoine(t,d,e)]}))}))},e.prototype.exitERC721Hermoine=function(t,e){return i(this,void 0,void 0,(function(){return a(this,(function(n){return[2,this.exitHermoine(t,h,e)]}))}))},e.prototype.isERC721ExitProcessed=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){return[2,this.isExitProcessed(t,h)]}))}))},e.prototype.isBatchERC721ExitProcessed=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){return[2,this.isExitProcessed(t,d)]}))}))},e.prototype.approveERC1155=function(t,e){return i(this,void 0,void 0,(function(){var n,r,o;return a(this,(function(i){switch(i.label){case 0:return[4,this.getPredicateAddress(t)];case 1:return n=i.sent(),r=this.getPOSERC1155TokenContract(t,!0).methods.setApprovalForAll(n,!0),[4,this.web3Client.fillOptions(r,!0,e)];case 2:return(o=i.sent()).encodeAbi?[2,Object.assign(o,{data:r.encodeABI(),to:t})]:[2,this.web3Client.send(r,o,e)]}}))}))},e.prototype.approveMintableERC1155=function(t,e){return i(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:if(!this.erc1155Predicate)throw new Error("posERC1155Predicate address not found. Set it while constructing MaticPOSClient.");return n=this.getPOSERC1155TokenContract(t,!0).methods.setApprovalForAll(this.erc1155MintablePredicate,!0),[4,this.web3Client.fillOptions(n,!0,e)];case 1:return(r=o.sent()).encodeAbi?[2,Object.assign(r,{data:n.encodeABI(),to:t})]:[2,this.web3Client.send(n,r,e)]}}))}))},e.prototype.depositSingleERC1155ForUser=function(t,e,n,r,o,s){return i(this,void 0,void 0,(function(){var i;return a(this,(function(a){return i=m.encodeParameters(["uint256[]","uint256[]","bytes"],[[this.formatUint256(e)],[this.formatUint256(n)],o||"0x0"]),[2,this.depositFor(r,t,i,s)]}))}))},e.prototype.depositBatchERC1155ForUser=function(t,e,n,r,o,s){return i(this,void 0,void 0,(function(){var i,c=this;return a(this,(function(a){return i=m.encodeParameters(["uint256[]","uint256[]","bytes"],[e.map((function(t){return c.formatUint256(t)})),n.map((function(t){return c.formatUint256(t)})),o||"0x0"]),[2,this.depositFor(r,t,i,s)]}))}))},e.prototype.burnSingleERC1155=function(t,e,n,r){return i(this,void 0,void 0,(function(){var o,i,s;return a(this,(function(a){switch(a.label){case 0:return o=this.getPOSERC1155TokenContract(t),i=o.methods.withdrawSingle(this.formatUint256(e),this.formatUint256(n)),[4,this.web3Client.fillOptions(i,!1,r)];case 1:return(s=a.sent()).encodeAbi?[2,Object.assign(s,{data:i.encodeABI(),to:t})]:[2,this.web3Client.send(i,s,r)]}}))}))},e.prototype.burnBatchERC1155=function(t,e,n,r){return i(this,void 0,void 0,(function(){var o,i,s,c=this;return a(this,(function(a){switch(a.label){case 0:return o=this.getPOSERC1155TokenContract(t),i=o.methods.withdrawBatch(e.map((function(t){return c.formatUint256(t)})),n.map((function(t){return c.formatUint256(t)}))),[4,this.web3Client.fillOptions(i,!1,r)];case 1:return(s=a.sent()).encodeAbi?[2,Object.assign(s,{data:i.encodeABI(),to:t})]:[2,this.web3Client.send(i,s,r)]}}))}))},e.prototype.exitSingleERC1155=function(t,e){return i(this,void 0,void 0,(function(){return a(this,(function(n){return[2,this.exit(t,p,e)]}))}))},e.prototype.exitSingleERC1155Hermoine=function(t,e){return i(this,void 0,void 0,(function(){return a(this,(function(n){return[2,this.exitHermoine(t,p,e)]}))}))},e.prototype.isSingleERC1155ExitProcessed=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){return[2,this.isExitProcessed(t,p)]}))}))},e.prototype.exitBatchERC1155=function(t,e){return i(this,void 0,void 0,(function(){return a(this,(function(n){return[2,this.exit(t,b,e)]}))}))},e.prototype.exitBatchERC1155Hermoine=function(t,e){return i(this,void 0,void 0,(function(){return a(this,(function(n){return[2,this.exitHermoine(t,b,e)]}))}))},e.prototype.isBatchERC1155ExitProcessed=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){return[2,this.isExitProcessed(t,b)]}))}))},e.prototype.mintERC721=function(t,e,n,r){return i(this,void 0,void 0,(function(){var o,i,s;return a(this,(function(a){switch(a.label){case 0:return o=this.getPOSERC721TokenContract(t),i=o.methods.mint(e,this.formatUint256(n)),[4,this.web3Client.fillOptions(i,!1,r)];case 1:return(s=a.sent()).encodeAbi?[2,Object.assign(s,{data:i.encodeAbi(),to:t})]:[2,this.web3Client.send(i,s,r)]}}))}))},e.prototype.mintERC1155=function(t,e,n,r,o,s){return i(this,void 0,void 0,(function(){var i,c,u,f;return a(this,(function(a){switch(a.label){case 0:return i=this.getPOSERC1155TokenContract(t),c=m.encodeParameters(["uint256[]","uint256[]","bytes"],[[this.formatUint256(n)],[this.formatUint256(r)],o||"0x0"]),u=i.methods.mint(e,n,r,c),[4,this.web3Client.fillOptions(u,!1,s)];case 1:return(f=a.sent()).encodeAbi?[2,Object.assign(f,{data:u.encodeABI(),to:t})]:[2,this.web3Client.send(u,f,s)]}}))}))},e.prototype.mintBatchERC1155ForUser=function(t,e,n,r,o,s){return i(this,void 0,void 0,(function(){var i,c,u,f,l=this;return a(this,(function(a){switch(a.label){case 0:return i=this.getPOSERC721TokenContract(t),c=m.encodeParameters(["uint256[]","uint256[]","bytes"],[e.map((function(t){return l.formatUint256(t)})),n.map((function(t){return l.formatUint256(t)})),o||"0x0"]),u=i.methods.mint(r,e,n,c),[4,this.web3Client.fillOptions(u,!1,s)];case 1:return(f=a.sent()).encodeAbi?[2,Object.assign(f,{data:u.encodeABI(),to:t})]:[2,this.web3Client.send(u,f,s)]}}))}))},e}(u.default);e.default=g},function(t,e,n){"use strict";(function(e){var r=n(30);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function o(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0}function i(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var a=n(31),s=Object.prototype.hasOwnProperty,c=Array.prototype.slice,u="foo"===function(){}.name;function f(t){return Object.prototype.toString.call(t)}function l(t){return!i(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var h=t.exports=y,d=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(a.isFunction(t)){if(u)return t.name;var e=t.toString().match(d);return e&&e[1]}}function b(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function m(t){if(u||!a.isFunction(t))return a.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function g(t,e,n,r,o){throw new h.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:o})}function y(t,e){t||g(t,!0,e,"==",h.ok)}function v(t,e,n,r){if(t===e)return!0;if(i(t)&&i(e))return 0===o(t,e);if(a.isDate(t)&&a.isDate(e))return t.getTime()===e.getTime();if(a.isRegExp(t)&&a.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(l(t)&&l(e)&&f(t)===f(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===o(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;var s=(r=r||{actual:[],expected:[]}).actual.indexOf(t);return-1!==s&&s===r.expected.indexOf(e)||(r.actual.push(t),r.expected.push(e),function(t,e,n,r){if(null==t||null==e)return!1;if(a.isPrimitive(t)||a.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=w(t),i=w(e);if(o&&!i||!o&&i)return!1;if(o)return t=c.call(t),e=c.call(e),v(t,e,n);var s,u,f=k(t),l=k(e);if(f.length!==l.length)return!1;for(f.sort(),l.sort(),u=f.length-1;u>=0;u--)if(f[u]!==l[u])return!1;for(u=f.length-1;u>=0;u--)if(s=f[u],!v(t[s],e[s],n,r))return!1;return!0}(t,e,n,r))}return n?t===e:t==e}function w(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function C(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function E(t,e,n,r){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!o&&g(o,n,"Missing expected exception"+r);var i="string"==typeof r,s=!t&&o&&!n;if((!t&&a.isError(o)&&i&&C(o,n)||s)&&g(o,n,"Got unwanted exception"+r),t&&o&&n&&!C(o,n)||!t&&o)throw o}h.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return b(m(t.actual),128)+" "+t.operator+" "+b(m(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,o=p(e),i=r.indexOf("\n"+o);if(i>=0){var a=r.indexOf("\n",i+1);r=r.substring(a+1)}this.stack=r}}},a.inherits(h.AssertionError,Error),h.fail=g,h.ok=y,h.equal=function(t,e,n){t!=e&&g(t,e,n,"==",h.equal)},h.notEqual=function(t,e,n){t==e&&g(t,e,n,"!=",h.notEqual)},h.deepEqual=function(t,e,n){v(t,e,!1)||g(t,e,n,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(t,e,n){v(t,e,!0)||g(t,e,n,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(t,e,n){v(t,e,!1)&&g(t,e,n,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function t(e,n,r){v(e,n,!0)&&g(e,n,r,"notDeepStrictEqual",t)},h.strictEqual=function(t,e,n){t!==e&&g(t,e,n,"===",h.strictEqual)},h.notStrictEqual=function(t,e,n){t===e&&g(t,e,n,"!==",h.notStrictEqual)},h.throws=function(t,e,n){E(!0,t,e,n)},h.doesNotThrow=function(t,e,n){E(!1,t,e,n)},h.ifError=function(t){if(t)throw t},h.strict=r((function t(e,n){e||g(e,!0,n,"==",t)}),h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var k=Object.keys||function(t){var e=[];for(var n in t)s.call(t,n)&&e.push(n);return e}}).call(this,n(4))},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function a(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,c=a(t),u=1;u<arguments.length;u++){for(var f in n=Object(arguments[u]))o.call(n,f)&&(c[f]=n[f]);if(r){s=r(n);for(var l=0;l<s.length;l++)i.call(n,s[l])&&(c[s[l]]=n[s[l]])}}return c}},function(t,e,n){(function(t){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},o=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,a=String(t).replace(o,(function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),c=r[n];n<i;c=r[++n])b(c)||!w(c)?a+=" "+c:a+=" "+s(c);return a},e.deprecate=function(n,r){if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var i,a={};function s(t,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&e._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),f(r,t,r.depth)}function c(t,e){var n=s.styles[e];return n?"["+s.colors[n][0]+"m"+t+"["+s.colors[n][1]+"m":t}function u(t,e){return t}function f(t,n,r){if(t.customInspect&&n&&k(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,t);return g(o)||(o=f(t,o,r)),o}var i=function(t,e){if(y(e))return t.stylize("undefined","undefined");if(g(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(m(e))return t.stylize(""+e,"number");if(p(e))return t.stylize(""+e,"boolean");if(b(e))return t.stylize("null","null")}(t,n);if(i)return i;var a=Object.keys(n),s=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),E(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(n);if(0===a.length){if(k(n)){var c=n.name?": "+n.name:"";return t.stylize("[Function"+c+"]","special")}if(v(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(C(n))return t.stylize(Date.prototype.toString.call(n),"date");if(E(n))return l(n)}var u,w="",x=!1,R=["{","}"];(d(n)&&(x=!0,R=["[","]"]),k(n))&&(w=" [Function"+(n.name?": "+n.name:"")+"]");return v(n)&&(w=" "+RegExp.prototype.toString.call(n)),C(n)&&(w=" "+Date.prototype.toUTCString.call(n)),E(n)&&(w=" "+l(n)),0!==a.length||x&&0!=n.length?r<0?v(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),u=x?function(t,e,n,r,o){for(var i=[],a=0,s=e.length;a<s;++a)P(e,String(a))?i.push(h(t,e,n,r,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(h(t,e,n,r,o,!0))})),i}(t,n,r,s,a):a.map((function(e){return h(t,n,r,s,e,x)})),t.seen.pop(),function(t,e,n){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(u,w,R)):R[0]+w+R[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,o,i){var a,s,c;if((c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),P(r,o)||(a="["+o+"]"),s||(t.seen.indexOf(c.value)<0?(s=b(n)?f(t,c.value,null):f(t,c.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),y(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function d(t){return Array.isArray(t)}function p(t){return"boolean"==typeof t}function b(t){return null===t}function m(t){return"number"==typeof t}function g(t){return"string"==typeof t}function y(t){return void 0===t}function v(t){return w(t)&&"[object RegExp]"===x(t)}function w(t){return"object"==typeof t&&null!==t}function C(t){return w(t)&&"[object Date]"===x(t)}function E(t){return w(t)&&("[object Error]"===x(t)||t instanceof Error)}function k(t){return"function"==typeof t}function x(t){return Object.prototype.toString.call(t)}function R(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(y(i)&&(i=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(i)){var r=t.pid;a[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else a[n]=function(){};return a[n]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=p,e.isNull=b,e.isNullOrUndefined=function(t){return null==t},e.isNumber=m,e.isString=g,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=y,e.isRegExp=v,e.isObject=w,e.isDate=C,e.isError=E,e.isFunction=k,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(32);var _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var t=new Date,e=[R(t.getHours()),R(t.getMinutes()),R(t.getSeconds())].join(":");return[t.getDate(),_[t.getMonth()],e].join(" ")}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",O(),e.format.apply(e,arguments))},e.inherits=n(33),e._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function S(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(T&&t[T]){var e;if("function"!=typeof(e=t[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,T,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise((function(t,r){e=t,n=r})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(t,r){t?n(t):e(r)}));try{t.apply(this,o)}catch(t){n(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),T&&Object.defineProperty(e,T,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=T,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return o.apply(i,arguments)};e.apply(this,n).then((function(e){t.nextTick(a,null,e)}),(function(e){t.nextTick(S,e,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,r(e)),n}}).call(this,n(6))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(35).Buffer,i=r.keccak256,a=function(){function t(t){if(void 0===t&&(t=[]),t.length<1)throw new Error("Atleast 1 leaf needed");var e=Math.ceil(Math.log(t.length)/Math.log(2));if(e>20)throw new Error("Depth must be 20 or less");this.leaves=t.concat(Array.from(Array(Math.pow(2,e)-t.length),(function(){return r.zeros(32)}))),this.layers=[this.leaves],this.createHashes(this.leaves)}return t.prototype.createHashes=function(t){if(1===t.length)return!1;for(var e=[],n=0;n<t.length;n+=2){var r=t[n],a=t[n+1],s=o.concat([r,a]);e.push(i(s))}t.length%2==1&&e.push(t[t.length-1]),this.layers.push(e),this.createHashes(e)},t.prototype.getLeaves=function(){return this.leaves},t.prototype.getLayers=function(){return this.layers},t.prototype.getRoot=function(){return this.layers[this.layers.length-1][0]},t.prototype.getProof=function(t){for(var e=-1,n=0;n<this.leaves.length;n++)0===o.compare(t,this.leaves[n])&&(e=n);var r=[];if(e<=this.getLeaves().length){var i=void 0;for(n=0;n<this.layers.length-1;n++)i=e%2==0?e+1:e-1,e=Math.floor(e/2),r.push(this.layers[n][i])}return r},t.prototype.verify=function(t,e,n,r){if(!Array.isArray(r)||!t||!n)return!1;for(var a=t,s=0;s<r.length;s++){var c=r[s];a=i(e%2==0?o.concat([a,c]):o.concat([c,a])),e=Math.floor(e/2)}return 0===o.compare(a,n)},t}();e.default=a,t.exports=a},function(t,e,n){var r=n(3),o=r.Buffer;function i(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return o(t,e,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=a),i(o,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=o(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";const r=n(9),o=n(1),i=n(37),a=n(59);t.exports=function(t,e){e=e||[];const n=new i({transactions:[],uncleHeaders:[]});return n.header=a(t),n.transactions=(t.transactions||[]).map((function(t){const e=function(t){const e=Object.assign({},t);return e.gasLimit=void 0===e.gasLimit?e.gas:e.gasLimit,e.data=void 0===e.data?e.input:e.data,e.to=e.to?o.setLengthLeft(o.toBuffer(e.to),20):null,e.v=e.v<27?e.v+27:e.v,e}(t),n=o.toBuffer(e.from);delete e.from;const i=new r(e);i._from=n,i.getSenderAddress=function(){return n};const a=o.toBuffer(e.hash);return i.hash=function(){return a},i})),n.uncleHeaders=e.map((function(t){return a(t)})),n}},function(t,e,n){(function(e){const r=n(14).default,o=n(1),i=n(9),a=n(13),s=o.BN,c=o.rlp,u=n(55),f=n(15);var l=t.exports=function(t,n){if((n=n||{}).common){if(n.chain)throw new Error("Instantiation with both opts.common and opts.chain parameter not allowed!");this._common=n.common}else{let t=n.chain?n.chain:"mainnet",e=n.hardfork?n.hardfork:null;this._common=new r(t,e)}var o,s;this.transactions=[],this.uncleHeaders=[],this._inBlockChain=!1,this.txTrie=new a,Object.defineProperty(this,"raw",{get:function(){return this.serialize(!1)}}),t||(t=[[],[],[]]),e.isBuffer(t)&&(t=c.decode(t)),Array.isArray(t)?(this.header=new f(t[0],n),o=t[1],s=t[2]):(this.header=new f(t.header,n),o=t.transactions||[],s=t.uncleHeaders||[]);for(var u=0;u<s.length;u++)this.uncleHeaders.push(new f(s[u],n));for(u=0;u<o.length;u++){var l=new i(o[u]);l._homestead=!0,this.transactions.push(l)}};function h(t){try{return t.reduce((function(t,e){return t&&(t+=" "),t+e}))}catch(t){return""}}l.Header=f,l.prototype.hash=function(){return this.header.hash()},l.prototype.isGenesis=function(){return this.header.isGenesis()},l.prototype.setGenesisParams=function(){this.header.setGenesisParams()},l.prototype.serialize=function(t){var e=[this.header.raw,[],[]];return void 0===t&&(t=!0),this.transactions.forEach((function(t){e[1].push(t.raw)})),this.uncleHeaders.forEach((function(t){e[2].push(t.raw)})),t?c.encode(e):e},l.prototype.genTxTrie=function(t){var e=0,n=this;u.eachSeries(this.transactions,(function(t,r){n.txTrie.put(c.encode(e),t.serialize(),r),e++}),t)},l.prototype.validateTransactionsTrie=function(){var t=this.header.transactionsTrie.toString("hex");return this.transactions.length?t===this.txTrie.root.toString("hex"):t===o.SHA3_RLP.toString("hex")},l.prototype.validateTransactions=function(t){var e=[];return this.transactions.forEach((function(t,n){var r=t.validate(!0);r&&e.push(r+" at tx "+n)})),void 0===t||!1===t?0===e.length:h(e)},l.prototype.validate=function(t,e){var n=this,r=[];u.parallel([n.validateUncles.bind(n,t),n.header.validate.bind(n.header,t),n.genTxTrie.bind(n)],(function(t){t&&r.push(t),n.validateTransactionsTrie()||r.push("invalid transaction trie");var o=n.validateTransactions(!0);""!==o&&r.push(o),n.validateUnclesHash()||r.push("invalid uncle hash"),e(h(r))}))},l.prototype.validateUnclesHash=function(){var t=[];return this.uncleHeaders.forEach((function(e){t.push(e.raw)})),t=c.encode(t),o.sha3(t).toString("hex")===this.header.uncleHash.toString("hex")},l.prototype.validateUncles=function(t,e){if(this.isGenesis())return e();var n=this;if(n.uncleHeaders.length>2)return e("too many uncle headers");var r=n.uncleHeaders.map((function(t){return t.hash().toString("hex")}));if(new Set(r).size!==r.length)return e("duplicate uncles");u.each(n.uncleHeaders,(function(e,r){var o=new s(n.header.number);u.parallel([e.validate.bind(e,t,o),function(n){t.getDetails(e.hash(),(function(t,e){e&&e.isUncle?n(t||"uncle already included"):n()}))}],r)}),e)},l.prototype.toJSON=function(t){if(t){var e={header:this.header.toJSON(!0),transactions:[],uncleHeaders:[]};return this.transactions.forEach((function(n){e.transactions.push(n.toJSON(t))})),this.uncleHeaders.forEach((function(t){e.uncleHeaders.push(t.toJSON())})),e}return o.baToJSON(this.raw)}}).call(this,n(3).Buffer)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.chains=void 0,e.chains={names:{1:"mainnet",3:"ropsten",4:"rinkeby",42:"kovan",5:"goerli"},mainnet:n(39),ropsten:n(40),rinkeby:n(41),kovan:n(42),goerli:n(43)}},function(t){t.exports=JSON.parse('{"name":"mainnet","chainId":1,"networkId":1,"comment":"The Ethereum main chain","url":"https://ethstats.net/","genesis":{"hash":"0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3","timestamp":null,"gasLimit":5000,"difficulty":17179869184,"nonce":"0x0000000000000042","extraData":"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa","stateRoot":"0xd7f8974fb5ac78d9ac099b9ad5018bedc2ce0a72dad1827a1709da30580f0544"},"hardforks":[{"name":"chainstart","block":0,"consensus":"pow","finality":null},{"name":"homestead","block":1150000,"consensus":"pow","finality":null},{"name":"dao","block":1920000,"consensus":"pow","finality":null},{"name":"tangerineWhistle","block":2463000,"consensus":"pow","finality":null},{"name":"spuriousDragon","block":2675000,"consensus":"pow","finality":null},{"name":"byzantium","block":4370000,"consensus":"pow","finality":null},{"name":"constantinople","block":7280000,"consensus":"pow","finality":null},{"name":"petersburg","block":7280000,"consensus":"pow","finality":null},{"name":"istanbul","block":9069000,"consensus":"pow","finality":null},{"name":"muirGlacier","block":9200000,"consensus":"pow","finality":null}],"bootstrapNodes":[{"ip":"18.138.108.67","port":30303,"id":"d860a01f9722d78051619d1e2351aba3f43f943f6f00718d1b9baa4101932a1f5011f16bb2b1bb35db20d6fe28fa0bf09636d26a87d31de9ec6203eeedb1f666","location":"ap-southeast-1-001","comment":"bootnode-aws-ap-southeast-1-001"},{"ip":"3.209.45.79","port":30303,"id":"22a8232c3abc76a16ae9d6c3b164f98775fe226f0917b0ca871128a74a8e9630b458460865bab457221f1d448dd9791d24c4e5d88786180ac185df813a68d4de","location":"us-east-1-001","comment":"bootnode-aws-us-east-1-001"},{"ip":"34.255.23.113","port":30303,"id":"ca6de62fce278f96aea6ec5a2daadb877e51651247cb96ee310a318def462913b653963c155a0ef6c7d50048bba6e6cea881130857413d9f50a621546b590758","location":"eu-west-1-001","comment":"bootnode-aws-eu-west-1-001"},{"ip":"35.158.244.151","port":30303,"id":"279944d8dcd428dffaa7436f25ca0ca43ae19e7bcf94a8fb7d1641651f92d121e972ac2e8f381414b80cc8e5555811c2ec6e1a99bb009b3f53c4c69923e11bd8","location":"eu-central-1-001","comment":"bootnode-aws-eu-central-1-001"},{"ip":"52.187.207.27","port":30303,"id":"8499da03c47d637b20eee24eec3c356c9a2e6148d6fe25ca195c7949ab8ec2c03e3556126b0d7ed644675e78c4318b08691b7b57de10e5f0d40d05b09238fa0a","location":"australiaeast-001","comment":"bootnode-azure-australiaeast-001"},{"ip":"191.234.162.198","port":30303,"id":"103858bdb88756c71f15e9b5e09b56dc1be52f0a5021d46301dbbfb7e130029cc9d0d6f73f693bc29b665770fff7da4d34f3c6379fe12721b5d7a0bcb5ca1fc1","location":"brazilsouth-001","comment":"bootnode-azure-brazilsouth-001"},{"ip":"52.231.165.108","port":30303,"id":"715171f50508aba88aecd1250af392a45a330af91d7b90701c436b618c86aaa1589c9184561907bebbb56439b8f8787bc01f49a7c77276c58c1b09822d75e8e8","location":"koreasouth-001","comment":"bootnode-azure-koreasouth-001"},{"ip":"104.42.217.25","port":30303,"id":"5d6d7cd20d6da4bb83a1d28cadb5d409b64edf314c0335df658c1a54e32c7c4a7ab7823d57c39b6a757556e68ff1df17c748b698544a55cb488b52479a92b60f","location":"westus-001","comment":"bootnode-azure-westus-001"}]}')},function(t){t.exports=JSON.parse('{"name":"ropsten","chainId":3,"networkId":3,"comment":"PoW test network","url":"https://github.com/ethereum/ropsten","genesis":{"hash":"0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d","timestamp":null,"gasLimit":16777216,"difficulty":1048576,"nonce":"0x0000000000000042","extraData":"0x3535353535353535353535353535353535353535353535353535353535353535","stateRoot":"0x217b0bbcfb72e2d57e28f33cb361b9983513177755dc3f33ce3e7022ed62b77b"},"hardforks":[{"name":"chainstart","block":0,"consensus":"pow","finality":null},{"name":"homestead","block":0,"consensus":"pow","finality":null},{"name":"dao","block":null,"consensus":"pow","finality":null},{"name":"tangerineWhistle","block":0,"consensus":"pow","finality":null},{"name":"spuriousDragon","block":10,"consensus":"pow","finality":null},{"name":"byzantium","block":1700000,"consensus":"pow","finality":null},{"name":"constantinople","block":4230000,"consensus":"pow","finality":null},{"name":"petersburg","block":4939394,"consensus":"pow","finality":null},{"name":"istanbul","block":6485846,"consensus":"pow","finality":null},{"name":"muirGlacier","block":7117117,"consensus":"pow","finality":null}],"bootstrapNodes":[{"ip":"52.176.7.10","port":30303,"id":"30b7ab30a01c124a6cceca36863ece12c4f5fa68e3ba9b0b51407ccc002eeed3b3102d20a88f1c1d3c3154e2449317b8ef95090e77b312d5cc39354f86d5d606","location":"","comment":"US-Azure geth"},{"ip":"52.176.100.77","port":30303,"id":"865a63255b3bb68023b6bffd5095118fcc13e79dcf014fe4e47e065c350c7cc72af2e53eff895f11ba1bbb6a2b33271c1116ee870f266618eadfc2e78aa7349c","location":"","comment":"US-Azure parity"},{"ip":"52.232.243.152","port":30303,"id":"6332792c4a00e3e4ee0926ed89e0d27ef985424d97b6a45bf0f23e51f0dcb5e66b875777506458aea7af6f9e4ffb69f43f3778ee73c81ed9d34c51c4b16b0b0f","location":"","comment":"Parity"},{"ip":"192.81.208.223","port":30303,"id":"94c15d1b9e2fe7ce56e458b9a3b672ef11894ddedd0c6f247e0f1d3487f52b66208fb4aeb8179fce6e3a749ea93ed147c37976d67af557508d199d9594c35f09","location":"","comment":"@gpip"}]}')},function(t){t.exports=JSON.parse('{"name":"rinkeby","chainId":4,"networkId":4,"comment":"PoA test network","url":"https://www.rinkeby.io","genesis":{"hash":"0x6341fd3daf94b748c72ced5a5b26028f2474f5f00d824504e4fa37a75767e177","timestamp":"0x58ee40ba","gasLimit":4700000,"difficulty":1,"nonce":"0x0000000000000000","extraData":"0x52657370656374206d7920617574686f7269746168207e452e436172746d616e42eb768f2244c8811c63729a21a3569731535f067ffc57839b00206d1ad20c69a1981b489f772031b279182d99e65703f0076e4812653aab85fca0f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","stateRoot":"0x53580584816f617295ea26c0e17641e0120cab2f0a8ffb53a866fd53aa8e8c2d"},"hardforks":[{"name":"chainstart","block":0,"consensus":"poa","finality":null},{"name":"homestead","block":1,"consensus":"poa","finality":null},{"name":"dao","block":null,"consensus":"poa","finality":null},{"name":"tangerineWhistle","block":2,"consensus":"poa","finality":null},{"name":"spuriousDragon","block":3,"consensus":"poa","finality":null},{"name":"byzantium","block":1035301,"consensus":"poa","finality":null},{"name":"constantinople","block":3660663,"consensus":"poa","finality":null},{"name":"petersburg","block":4321234,"consensus":"poa","finality":null},{"name":"istanbul","block":5435345,"consensus":"poa","finality":null}],"bootstrapNodes":[{"ip":"52.169.42.101","port":30303,"id":"a24ac7c5484ef4ed0c5eb2d36620ba4e4aa13b8c84684e1b4aab0cebea2ae45cb4d375b77eab56516d34bfbd3c1a833fc51296ff084b770b94fb9028c4d25ccf","location":"","comment":"IE"},{"ip":"52.3.158.184","port":30303,"id":"343149e4feefa15d882d9fe4ac7d88f885bd05ebb735e547f12e12080a9fa07c8014ca6fd7f373123488102fe5e34111f8509cf0b7de3f5b44339c9f25e87cb8","location":"","comment":"INFURA"},{"ip":"159.89.28.211","port":30303,"id":"b6b28890b006743680c52e64e0d16db57f28124885595fa03a562be1d2bf0f3a1da297d56b13da25fb992888fd556d4c1a27b1f39d531bde7de1921c90061cc6","location":"","comment":"AKASHA"}]}')},function(t){t.exports=JSON.parse('{"name":"kovan","chainId":42,"networkId":42,"comment":"Parity PoA test network","url":"https://kovan-testnet.github.io/website/","genesis":{"hash":"0xa3c565fc15c7478862d50ccd6561e3c06b24cc509bf388941c25ea985ce32cb9","timestamp":null,"gasLimit":6000000,"difficulty":131072,"nonce":"0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","extraData":"0x","stateRoot":"0x2480155b48a1cea17d67dbfdfaafe821c1d19cdd478c5358e8ec56dec24502b2"},"hardforks":[{"name":"chainstart","block":0,"consensus":"poa","finality":null},{"name":"homestead","block":0,"consensus":"poa","finality":null},{"name":"dao","block":0,"consensus":"poa","finality":null},{"name":"tangerineWhistle","block":0,"consensus":"poa","finality":null},{"name":"spuriousDragon","block":0,"consensus":"poa","finality":null},{"name":"byzantium","block":5067000,"consensus":"poa","finality":null},{"name":"constantinople","block":9200000,"consensus":"poa","finality":null},{"name":"petersburg","block":10255201,"consensus":"poa","finality":null},{"name":"istanbul","block":14111141,"consensus":"poa","finality":null}],"bootstrapNodes":[{"ip":"116.203.116.241","port":30303,"id":"16898006ba2cd4fa8bf9a3dfe32684c178fa861df144bfc21fe800dc4838a03e342056951fa9fd533dcb0be1219e306106442ff2cf1f7e9f8faa5f2fc1a3aa45","location":"","comment":"1"},{"ip":"3.217.96.11","port":30303,"id":"2909846f78c37510cc0e306f185323b83bb2209e5ff4fdd279d93c60e3f365e3c6e62ad1d2133ff11f9fd6d23ad9c3dad73bb974d53a22f7d1ac5b7dea79d0b0","location":"","comment":"2"},{"ip":"108.61.170.124","port":30303,"id":"740e1c8ea64e71762c71a463a04e2046070a0c9394fcab5891d41301dc473c0cff00ebab5a9bc87fbcb610ab98ac18225ff897bc8b7b38def5975d5ceb0a7d7c","location":"","comment":"3"},{"ip":"157.230.31.163","port":30303,"id":"2909846f78c37510cc0e306f185323b83bb2209e5ff4fdd279d93c60e3f365e3c6e62ad1d2133ff11f9fd6d23ad9c3dad73bb974d53a22f7d1ac5b7dea79d0b0","location":"","comment":"4"}]}')},function(t){t.exports=JSON.parse('{"name":"goerli","chainId":5,"networkId":5,"comment":"Cross-client PoA test network","url":"https://github.com/goerli/testnet","genesis":{"hash":"0xbf7e331f7f7c1dd2e05159666b3bf8bc7a8a3a9eb1d518969eab529dd9b88c1a","timestamp":"0x5c51a607","gasLimit":10485760,"difficulty":1,"nonce":"0x0000000000000000","extraData":"0x22466c6578692069732061207468696e6722202d204166726900000000000000e0a2bd4258d2768837baa26a28fe71dc079f84c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","stateRoot":"0x5d6cded585e73c4e322c30c2f782a336316f17dd85a4863b9d838d2d4b8b3008"},"hardforks":[{"name":"chainstart","block":0,"consensus":"poa","finality":null},{"name":"homestead","block":0,"consensus":"poa","finality":null},{"name":"dao","block":0,"consensus":"poa","finality":null},{"name":"tangerineWhistle","block":0,"consensus":"poa","finality":null},{"name":"spuriousDragon","block":0,"consensus":"poa","finality":null},{"name":"byzantium","block":0,"consensus":"poa","finality":null},{"name":"constantinople","block":0,"consensus":"poa","finality":null},{"name":"petersburg","block":0,"consensus":"poa","finality":null},{"name":"istanbul","block":1561651,"consensus":"poa","finality":null}],"bootstrapNodes":[{"ip":"51.141.78.53","port":30303,"id":"011f758e6552d105183b1761c5e2dea0111bc20fd5f6422bc7f91e0fabbec9a6595caf6239b37feb773dddd3f87240d99d859431891e4a642cf2a0a9e6cbb98a","location":"","comment":"Upstream bootnode 1"},{"ip":"13.93.54.137","port":30303,"id":"176b9417f511d05b6b2cf3e34b756cf0a7096b3094572a8f6ef4cdcb9d1f9d00683bf0f83347eebdf3b81c3521c2332086d9592802230bf528eaf606a1d9677b","location":"","comment":"Upstream bootnode 2"},{"ip":"94.237.54.114","port":30313,"id":"46add44b9f13965f7b9875ac6b85f016f341012d84f975377573800a863526f4da19ae2c620ec73d11591fa9510e992ecc03ad0751f53cc02f7c7ed6d55c7291","location":"","comment":"Upstream bootnode 3"},{"ip":"52.64.155.147","port":30303,"id":"c1f8b7c2ac4453271fa07d8e9ecf9a2e8285aa0bd0c07df0131f47153306b0736fd3db8924e7a9bf0bed6b1d8d4f87362a71b033dc7c64547728d953e43e59b2","location":"","comment":"Upstream bootnode 4"},{"ip":"213.186.16.82","port":30303,"id":"f4a9c6ee28586009fb5a96c8af13a58ed6d8315a9eee4772212c1d4d9cebe5a8b8a78ea4434f318726317d04a3f531a1ef0420cf9752605a562cfe858c46e263","location":"","comment":"Upstream bootnode 5"},{"ip":"3.11.147.67","port":30303,"id":"a61215641fb8714a373c80edbfa0ea8878243193f57c96eeb44d0bc019ef295abd4e044fd619bfc4c59731a73fb79afe84e9ab6da0c743ceb479cbb6d263fa91","location":"","comment":"Ethereum Foundation bootnode"}]}')},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hardforks=void 0,e.hardforks=[["chainstart",n(45)],["homestead",n(46)],["dao",n(47)],["tangerineWhistle",n(48)],["spuriousDragon",n(49)],["byzantium",n(50)],["constantinople",n(51)],["petersburg",n(52)],["istanbul",n(53)],["muirGlacier",n(54)]]},function(t){t.exports=JSON.parse('{"name":"chainstart","comment":"Start of the Ethereum main chain","eip":{"url":"","status":""},"status":"","gasConfig":{"minGasLimit":{"v":5000,"d":"Minimum the gas limit may ever be"},"gasLimitBoundDivisor":{"v":1024,"d":"The bound divisor of the gas limit, used in update calculations"}},"gasPrices":{"base":{"v":2,"d":"Gas base cost, used e.g. for ChainID opcode (Istanbul)"},"tierStep":{"v":[0,2,3,5,8,10,20],"d":"Once per operation, for a selection of them"},"exp":{"v":10,"d":"Once per EXP instuction"},"expByte":{"v":10,"d":"Times ceil(log256(exponent)) for the EXP instruction"},"sha3":{"v":30,"d":"Once per SHA3 operation"},"sha3Word":{"v":6,"d":"Once per word of the SHA3 operation\'s data"},"sload":{"v":50,"d":"Once per SLOAD operation"},"sstoreSet":{"v":20000,"d":"Once per SSTORE operation if the zeroness changes from zero"},"sstoreReset":{"v":5000,"d":"Once per SSTORE operation if the zeroness does not change from zero"},"sstoreRefund":{"v":15000,"d":"Once per SSTORE operation if the zeroness changes to zero"},"jumpdest":{"v":1,"d":"Refunded gas, once per SSTORE operation if the zeroness changes to zero"},"log":{"v":375,"d":"Per LOG* operation"},"logData":{"v":8,"d":"Per byte in a LOG* operation\'s data"},"logTopic":{"v":375,"d":"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas"},"create":{"v":32000,"d":"Once per CREATE operation & contract-creation transaction"},"call":{"v":40,"d":"Once per CALL operation & message call transaction"},"callStipend":{"v":2300,"d":"Free gas given at beginning of call"},"callValueTransfer":{"v":9000,"d":"Paid for CALL when the value transfor is non-zero"},"callNewAccount":{"v":25000,"d":"Paid for CALL when the destination address didn\'t exist prior"},"selfdestructRefund":{"v":24000,"d":"Refunded following a selfdestruct operation"},"memory":{"v":3,"d":"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL"},"quadCoeffDiv":{"v":512,"d":"Divisor for the quadratic particle of the memory cost equation"},"createData":{"v":200,"d":""},"tx":{"v":21000,"d":"Per transaction. NOTE: Not payable on data of calls between transactions"},"txCreation":{"v":32000,"d":"The cost of creating a contract via tx"},"txDataZero":{"v":4,"d":"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions"},"txDataNonZero":{"v":68,"d":"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},"copy":{"v":3,"d":"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added"},"ecRecover":{"v":3000,"d":""},"sha256":{"v":60,"d":""},"sha256Word":{"v":12,"d":""},"ripemd160":{"v":600,"d":""},"ripemd160Word":{"v":120,"d":""},"identity":{"v":15,"d":""},"identityWord":{"v":3,"d":""}},"vm":{"stackLimit":{"v":1024,"d":"Maximum size of VM stack allowed"},"callCreateDepth":{"v":1024,"d":"Maximum depth of call/create stack"},"maxExtraDataSize":{"v":32,"d":"Maximum size extra data may be after Genesis"}},"pow":{"minimumDifficulty":{"v":131072,"d":"The minimum that the difficulty may ever be"},"difficultyBoundDivisor":{"v":2048,"d":"The bound divisor of the difficulty, used in the update calculations"},"durationLimit":{"v":13,"d":"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not"},"epochDuration":{"v":30000,"d":"Duration between proof-of-work epochs"},"timebombPeriod":{"v":100000,"d":"Exponential difficulty timebomb period"},"minerReward":{"v":"5000000000000000000","d":"the amount a miner get rewarded for mining a block"}},"casper":{},"sharding":{}}')},function(t){t.exports=JSON.parse('{"name":"homestead","comment":"Homestead hardfork with protocol and network changes","eip":{"url":"https://eips.ethereum.org/EIPS/eip-606","status":"Final"},"gasConfig":{},"gasPrices":{},"vm":{},"pow":{},"casper":{},"sharding":{}}')},function(t){t.exports=JSON.parse('{"name":"dao","comment":"DAO rescue hardfork","eip":{"url":"https://eips.ethereum.org/EIPS/eip-779","status":"Final"},"gasConfig":{},"gasPrices":{},"vm":{},"pow":{},"casper":{},"sharding":{}}')},function(t){t.exports=JSON.parse('{"name":"tangerineWhistle","comment":"Hardfork with gas cost changes for IO-heavy operations","eip":{"url":"https://eips.ethereum.org/EIPS/eip-608","status":"Final"},"gasConfig":{},"gasPrices":{"sload":{"v":200,"d":"Once per SLOAD operation"},"call":{"v":700,"d":"Once per CALL operation & message call transaction"}},"vm":{},"pow":{},"casper":{},"sharding":{}}')},function(t){t.exports=JSON.parse('{"name":"spuriousDragon","comment":"HF with EIPs for simple replay attack protection, EXP cost increase, state trie clearing, contract code size limit","eip":{"url":"https://eips.ethereum.org/EIPS/eip-607","status":"Final"},"gasConfig":{},"gasPrices":{"expByte":{"v":50,"d":"Times ceil(log256(exponent)) for the EXP instruction"}},"vm":{"maxCodeSize":{"v":24576,"d":"Maximum length of contract code"}},"pow":{},"casper":{},"sharding":{}}')},function(t){t.exports=JSON.parse('{"name":"byzantium","comment":"Hardfork with new precompiles, instructions and other protocol changes","eip":{"url":"https://eips.ethereum.org/EIPS/eip-609","status":"Final"},"gasConfig":{},"gasPrices":{"modexpGquaddivisor":{"v":20,"d":"Gquaddivisor from modexp precompile for gas calculation"},"ecAdd":{"v":500,"d":"Gas costs for curve addition precompile"},"ecMul":{"v":40000,"d":"Gas costs for curve multiplication precompile"},"ecPairing":{"v":100000,"d":"Base gas costs for curve pairing precompile"},"ecPairingWord":{"v":80000,"d":"Gas costs regarding curve pairing precompile input length"}},"vm":{},"pow":{"minerReward":{"v":"3000000000000000000","d":"the amount a miner get rewarded for mining a block"}},"casper":{},"sharding":{}}')},function(t){t.exports=JSON.parse('{"name":"constantinople","comment":"Postponed hardfork including EIP-1283 (SSTORE gas metering changes)","eip":{"url":"https://eips.ethereum.org/EIPS/eip-1013","status":"Final"},"gasConfig":{},"gasPrices":{"netSstoreNoopGas":{"v":200,"d":"Once per SSTORE operation if the value doesn\'t change"},"netSstoreInitGas":{"v":20000,"d":"Once per SSTORE operation from clean zero"},"netSstoreCleanGas":{"v":5000,"d":"Once per SSTORE operation from clean non-zero"},"netSstoreDirtyGas":{"v":200,"d":"Once per SSTORE operation from dirty"},"netSstoreClearRefund":{"v":15000,"d":"Once per SSTORE operation for clearing an originally existing storage slot"},"netSstoreResetRefund":{"v":4800,"d":"Once per SSTORE operation for resetting to the original non-zero value"},"netSstoreResetClearRefund":{"v":19800,"d":"Once per SSTORE operation for resetting to the original zero value"}},"vm":{},"pow":{"minerReward":{"v":"2000000000000000000","d":"The amount a miner gets rewarded for mining a block"}},"casper":{},"sharding":{}}')},function(t){t.exports=JSON.parse('{"name":"petersburg","comment":"Aka constantinopleFix, removes EIP-1283, activate together with or after constantinople","eip":{"url":"https://eips.ethereum.org/EIPS/eip-1716","status":"Draft"},"gasConfig":{},"gasPrices":{"netSstoreNoopGas":{"v":null,"d":"Removed along EIP-1283"},"netSstoreInitGas":{"v":null,"d":"Removed along EIP-1283"},"netSstoreCleanGas":{"v":null,"d":"Removed along EIP-1283"},"netSstoreDirtyGas":{"v":null,"d":"Removed along EIP-1283"},"netSstoreClearRefund":{"v":null,"d":"Removed along EIP-1283"},"netSstoreResetRefund":{"v":null,"d":"Removed along EIP-1283"},"netSstoreResetClearRefund":{"v":null,"d":"Removed along EIP-1283"}},"vm":{},"pow":{},"casper":{},"sharding":{}}')},function(t){t.exports=JSON.parse('{"name":"istanbul","comment":"HF targeted for December 2019 following the Constantinople/Petersburg HF","eip":{"url":"https://eips.ethereum.org/EIPS/eip-1679","status":"Draft"},"gasConfig":{},"gasPrices":{"blake2Round":{"v":1,"d":"Gas cost per round for the Blake2 F precompile"},"ecAdd":{"v":150,"d":"Gas costs for curve addition precompile"},"ecMul":{"v":6000,"d":"Gas costs for curve multiplication precompile"},"ecPairing":{"v":45000,"d":"Base gas costs for curve pairing precompile"},"ecPairingWord":{"v":34000,"d":"Gas costs regarding curve pairing precompile input length"},"txDataNonZero":{"v":16,"d":"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},"sstoreSentryGasEIP2200":{"v":2300,"d":"Minimum gas required to be present for an SSTORE call, not consumed"},"sstoreNoopGasEIP2200":{"v":800,"d":"Once per SSTORE operation if the value doesn\'t change"},"sstoreDirtyGasEIP2200":{"v":800,"d":"Once per SSTORE operation if a dirty value is changed"},"sstoreInitGasEIP2200":{"v":20000,"d":"Once per SSTORE operation from clean zero to non-zero"},"sstoreInitRefundEIP2200":{"v":19200,"d":"Once per SSTORE operation for resetting to the original zero value"},"sstoreCleanGasEIP2200":{"v":5000,"d":"Once per SSTORE operation from clean non-zero to something else"},"sstoreCleanRefundEIP2200":{"v":4200,"d":"Once per SSTORE operation for resetting to the original non-zero value"},"sstoreClearRefundEIP2200":{"v":15000,"d":"Once per SSTORE operation for clearing an originally existing storage slot"}},"vm":{},"pow":{},"casper":{},"sharding":{}}')},function(t){t.exports=JSON.parse('{"name":"muirGlacier","comment":"HF to delay the difficulty bomb","eip":{"url":"https://eips.ethereum.org/EIPS/eip-2384","status":"Last Call"},"gasConfig":{},"gasPrices":{},"vm":{},"pow":{},"casper":{},"sharding":{}}')},function(t,e,n){(function(t,n,r,o){(function(e){"use strict";function i(t,e){e|=0;for(var n=Math.max(t.length-e,0),r=Array(n),o=0;o<n;o++)r[o]=t[e+o];return r}var a=function(t){var e=i(arguments,1);return function(){var n=i(arguments);return t.apply(null,e.concat(n))}},s=function(t){return function(){var e=i(arguments),n=e.pop();t.call(this,e,n)}};function c(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var u="function"==typeof t&&t,f="object"==typeof n&&"function"==typeof n.nextTick;function l(t){setTimeout(t,0)}function h(t){return function(e){var n=i(arguments,1);t((function(){e.apply(null,n)}))}}var d=h(u?t:f?n.nextTick:l);function p(t){return s((function(e,n){var r;try{r=t.apply(this,e)}catch(t){return n(t)}c(r)&&"function"==typeof r.then?r.then((function(t){b(n,null,t)}),(function(t){b(n,t.message?t:new Error(t))})):n(null,r)}))}function b(t,e,n){try{t(e,n)}catch(t){d(m,t)}}function m(t){throw t}var g="function"==typeof Symbol;function y(t){return g&&"AsyncFunction"===t[Symbol.toStringTag]}function v(t){return y(t)?p(t):t}function w(t){return function(e){var n=i(arguments,1),r=s((function(n,r){var o=this;return t(e,(function(t,e){v(t).apply(o,n.concat(e))}),r)}));return n.length?r.apply(this,n):r}}var C="object"==typeof r&&r&&r.Object===Object&&r,E="object"==typeof self&&self&&self.Object===Object&&self,k=C||E||Function("return this")(),x=k.Symbol,R=Object.prototype,_=R.hasOwnProperty,O=R.toString,P=x?x.toStringTag:void 0,T=Object.prototype.toString,S=x?x.toStringTag:void 0;function A(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":S&&S in Object(t)?function(t){var e=_.call(t,P),n=t[P];try{t[P]=void 0;var r=!0}catch(t){}var o=O.call(t);return r&&(e?t[P]=n:delete t[P]),o}(t):function(t){return T.call(t)}(t)}function M(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function I(t){return null!=t&&M(t.length)&&!function(t){if(!c(t))return!1;var e=A(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}(t)}var B={};function j(){}function F(t){return function(){if(null!==t){var e=t;t=null,e.apply(this,arguments)}}}var H="function"==typeof Symbol&&Symbol.iterator;function L(t){return null!=t&&"object"==typeof t}function D(t){return L(t)&&"[object Arguments]"==A(t)}var N=Object.prototype,U=N.hasOwnProperty,W=N.propertyIsEnumerable,z=D(function(){return arguments}())?D:function(t){return L(t)&&U.call(t,"callee")&&!W.call(t,"callee")},G=Array.isArray,q="object"==typeof e&&e&&!e.nodeType&&e,Y=q&&"object"==typeof o&&o&&!o.nodeType&&o,J=Y&&Y.exports===q?k.Buffer:void 0,V=(J?J.isBuffer:void 0)||function(){return!1},$=/^(?:0|[1-9]\d*)$/;function Z(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&$.test(t))&&t>-1&&t%1==0&&t<e}var K={};K["[object Float32Array]"]=K["[object Float64Array]"]=K["[object Int8Array]"]=K["[object Int16Array]"]=K["[object Int32Array]"]=K["[object Uint8Array]"]=K["[object Uint8ClampedArray]"]=K["[object Uint16Array]"]=K["[object Uint32Array]"]=!0,K["[object Arguments]"]=K["[object Array]"]=K["[object ArrayBuffer]"]=K["[object Boolean]"]=K["[object DataView]"]=K["[object Date]"]=K["[object Error]"]=K["[object Function]"]=K["[object Map]"]=K["[object Number]"]=K["[object Object]"]=K["[object RegExp]"]=K["[object Set]"]=K["[object String]"]=K["[object WeakMap]"]=!1;var X,Q="object"==typeof e&&e&&!e.nodeType&&e,tt=Q&&"object"==typeof o&&o&&!o.nodeType&&o,et=tt&&tt.exports===Q&&C.process,nt=function(){try{var t=tt&&tt.require&&tt.require("util").types;return t||et&&et.binding&&et.binding("util")}catch(t){}}(),rt=nt&&nt.isTypedArray,ot=rt?(X=rt,function(t){return X(t)}):function(t){return L(t)&&M(t.length)&&!!K[A(t)]},it=Object.prototype.hasOwnProperty;function at(t,e){var n=G(t),r=!n&&z(t),o=!n&&!r&&V(t),i=!n&&!r&&!o&&ot(t),a=n||r||o||i,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=s.length;for(var u in t)!e&&!it.call(t,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Z(u,c))||s.push(u);return s}var st=Object.prototype,ct=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),ut=Object.prototype.hasOwnProperty;function ft(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||st))return ct(t);var e,n,r=[];for(var o in Object(t))ut.call(t,o)&&"constructor"!=o&&r.push(o);return r}function lt(t){return I(t)?at(t):ft(t)}function ht(t){if(I(t))return function(t){var e=-1,n=t.length;return function(){return++e<n?{value:t[e],key:e}:null}}(t);var e,n,r,o,i=function(t){return H&&t[H]&&t[H]()}(t);return i?function(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}(i):(n=lt(e=t),r=-1,o=n.length,function(){var t=n[++r];return r<o?{value:e[t],key:t}:null})}function dt(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function pt(t){return function(e,n,r){if(r=F(r||j),t<=0||!e)return r(null);var o=ht(e),i=!1,a=0,s=!1;function c(t,e){if(a-=1,t)i=!0,r(t);else{if(e===B||i&&a<=0)return i=!0,r(null);s||u()}}function u(){for(s=!0;a<t&&!i;){var e=o();if(null===e)return i=!0,void(a<=0&&r(null));a+=1,n(e.value,e.key,dt(c))}s=!1}u()}}function bt(t,e,n,r){pt(e)(t,v(n),r)}function mt(t,e){return function(n,r,o){return t(n,e,r,o)}}function gt(t,e,n){n=F(n||j);var r=0,o=0,i=t.length;function a(t,e){t?n(t):++o!==i&&e!==B||n(null)}for(0===i&&n(null);r<i;r++)e(t[r],r,dt(a))}var yt=mt(bt,1/0),vt=function(t,e,n){(I(t)?gt:yt)(t,v(e),n)};function wt(t){return function(e,n,r){return t(vt,e,v(n),r)}}function Ct(t,e,n,r){r=r||j,e=e||[];var o=[],i=0,a=v(n);t(e,(function(t,e,n){var r=i++;a(t,(function(t,e){o[r]=e,n(t)}))}),(function(t){r(t,o)}))}var Et=wt(Ct),kt=w(Et);function xt(t){return function(e,n,r,o){return t(pt(n),e,v(r),o)}}var Rt=xt(Ct),_t=mt(Rt,1),Ot=w(_t);function Pt(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}var Tt,St=function(t,e,n){for(var r=-1,o=Object(t),i=n(t),a=i.length;a--;){var s=i[Tt?a:++r];if(!1===e(o[s],s,o))break}return t};function At(t,e){return t&&St(t,e,lt)}function Mt(t){return t!=t}function It(t,e,n){return e==e?function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}(t,e,n):function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,Mt,n)}var Bt=function(t,e,n){"function"==typeof e&&(n=e,e=null),n=F(n||j);var r=lt(t).length;if(!r)return n(null);e||(e=r);var o={},a=0,s=!1,c=Object.create(null),u=[],f=[],l={};function h(t,e){u.push((function(){!function(t,e){if(!s){var r=dt((function(e,r){if(a--,arguments.length>2&&(r=i(arguments,1)),e){var u={};At(o,(function(t,e){u[e]=t})),u[t]=r,s=!0,c=Object.create(null),n(e,u)}else o[t]=r,p(t)}));a++;var u=v(e[e.length-1]);e.length>1?u(o,r):u(r)}}(t,e)}))}function d(){if(0===u.length&&0===a)return n(null,o);for(;u.length&&a<e;)u.shift()()}function p(t){Pt(c[t]||[],(function(t){t()})),d()}function b(e){var n=[];return At(t,(function(t,r){G(t)&&It(t,e,0)>=0&&n.push(r)})),n}At(t,(function(e,n){if(!G(e))return h(n,[e]),void f.push(n);var r=e.slice(0,e.length-1),o=r.length;if(0===o)return h(n,e),void f.push(n);l[n]=o,Pt(r,(function(i){if(!t[i])throw new Error("async.auto task `"+n+"` has a non-existent dependency `"+i+"` in "+r.join(", "));var a,s,u;s=function(){0==--o&&h(n,e)},(u=c[a=i])||(u=c[a]=[]),u.push(s)}))})),function(){for(var t,e=0;f.length;)t=f.pop(),e++,Pt(b(t),(function(t){0==--l[t]&&f.push(t)}));if(e!==r)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),d()};function jt(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}var Ft=x?x.prototype:void 0,Ht=Ft?Ft.toString:void 0;function Lt(t){if("string"==typeof t)return t;if(G(t))return jt(t,Lt)+"";if(function(t){return"symbol"==typeof t||L(t)&&"[object Symbol]"==A(t)}(t))return Ht?Ht.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Dt(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:function(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}(t,e,n)}var Nt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Ut="[\\ud800-\\udfff]",Wt="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",zt="\\ud83c[\\udffb-\\udfff]",Gt="[^\\ud800-\\udfff]",qt="(?:\\ud83c[\\udde6-\\uddff]){2}",Yt="[\\ud800-\\udbff][\\udc00-\\udfff]",Jt="(?:"+Wt+"|"+zt+")?",Vt="[\\ufe0e\\ufe0f]?"+Jt+"(?:\\u200d(?:"+[Gt,qt,Yt].join("|")+")[\\ufe0e\\ufe0f]?"+Jt+")*",$t="(?:"+[Gt+Wt+"?",Wt,qt,Yt,Ut].join("|")+")",Zt=RegExp(zt+"(?="+zt+")|"+$t+Vt,"g");function Kt(t){return function(t){return Nt.test(t)}(t)?function(t){return t.match(Zt)||[]}(t):function(t){return t.split("")}(t)}var Xt=/^\s+|\s+$/g;function Qt(t,e,n){var r;if((t=null==(r=t)?"":Lt(r))&&(n||void 0===e))return t.replace(Xt,"");if(!t||!(e=Lt(e)))return t;var o=Kt(t),i=Kt(e);return Dt(o,function(t,e){for(var n=-1,r=t.length;++n<r&&It(e,t[n],0)>-1;);return n}(o,i),function(t,e){for(var n=t.length;n--&&It(e,t[n],0)>-1;);return n}(o,i)+1).join("")}var te=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,ee=/,/,ne=/(=.+)?(\s*)$/,re=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function oe(t,e){var n={};At(t,(function(t,e){var r,o=y(t),i=!o&&1===t.length||o&&0===t.length;if(G(t))r=t.slice(0,-1),t=t[t.length-1],n[e]=r.concat(r.length>0?a:t);else if(i)n[e]=t;else{if(r=function(t){return t=(t=(t=(t=t.toString().replace(re,"")).match(te)[2].replace(" ",""))?t.split(ee):[]).map((function(t){return Qt(t.replace(ne,""))}))}(t),0===t.length&&!o&&0===r.length)throw new Error("autoInject task functions require explicit parameters.");o||r.pop(),n[e]=r.concat(a)}function a(e,n){var o=jt(r,(function(t){return e[t]}));o.push(n),v(t).apply(null,o)}})),Bt(n,e)}function ie(){this.head=this.tail=null,this.length=0}function ae(t,e){t.length=1,t.head=t.tail=e}function se(t,e,n){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var r=v(t),o=0,i=[],a=!1;function s(t,e,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(f.started=!0,G(t)||(t=[t]),0===t.length&&f.idle())return d((function(){f.drain()}));for(var r=0,o=t.length;r<o;r++){var i={data:t[r],callback:n||j};e?f._tasks.unshift(i):f._tasks.push(i)}a||(a=!0,d((function(){a=!1,f.process()})))}function c(t){return function(e){o-=1;for(var n=0,r=t.length;n<r;n++){var a=t[n],s=It(i,a,0);0===s?i.shift():s>0&&i.splice(s,1),a.callback.apply(a,arguments),null!=e&&f.error(e,a.data)}o<=f.concurrency-f.buffer&&f.unsaturated(),f.idle()&&f.drain(),f.process()}}var u=!1,f={_tasks:new ie,concurrency:e,payload:n,saturated:j,unsaturated:j,buffer:e/4,empty:j,drain:j,error:j,started:!1,paused:!1,push:function(t,e){s(t,!1,e)},kill:function(){f.drain=j,f._tasks.empty()},unshift:function(t,e){s(t,!0,e)},remove:function(t){f._tasks.remove(t)},process:function(){if(!u){for(u=!0;!f.paused&&o<f.concurrency&&f._tasks.length;){var t=[],e=[],n=f._tasks.length;f.payload&&(n=Math.min(n,f.payload));for(var a=0;a<n;a++){var s=f._tasks.shift();t.push(s),i.push(s),e.push(s.data)}o+=1,0===f._tasks.length&&f.empty(),o===f.concurrency&&f.saturated();var l=dt(c(t));r(e,l)}u=!1}},length:function(){return f._tasks.length},running:function(){return o},workersList:function(){return i},idle:function(){return f._tasks.length+o===0},pause:function(){f.paused=!0},resume:function(){!1!==f.paused&&(f.paused=!1,d(f.process))}};return f}function ce(t,e){return se(t,1,e)}ie.prototype.removeLink=function(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,t.prev=t.next=null,this.length-=1,t},ie.prototype.empty=function(){for(;this.head;)this.shift();return this},ie.prototype.insertAfter=function(t,e){e.prev=t,e.next=t.next,t.next?t.next.prev=e:this.tail=e,t.next=e,this.length+=1},ie.prototype.insertBefore=function(t,e){e.prev=t.prev,e.next=t,t.prev?t.prev.next=e:this.head=e,t.prev=e,this.length+=1},ie.prototype.unshift=function(t){this.head?this.insertBefore(this.head,t):ae(this,t)},ie.prototype.push=function(t){this.tail?this.insertAfter(this.tail,t):ae(this,t)},ie.prototype.shift=function(){return this.head&&this.removeLink(this.head)},ie.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},ie.prototype.toArray=function(){for(var t=Array(this.length),e=this.head,n=0;n<this.length;n++)t[n]=e.data,e=e.next;return t},ie.prototype.remove=function(t){for(var e=this.head;e;){var n=e.next;t(e)&&this.removeLink(e),e=n}return this};var ue=mt(bt,1);function fe(t,e,n,r){r=F(r||j);var o=v(n);ue(t,(function(t,n,r){o(e,t,(function(t,n){e=n,r(t)}))}),(function(t){r(t,e)}))}function le(){var t=jt(arguments,v);return function(){var e=i(arguments),n=this,r=e[e.length-1];"function"==typeof r?e.pop():r=j,fe(t,e,(function(t,e,r){e.apply(n,t.concat((function(t){var e=i(arguments,1);r(t,e)})))}),(function(t,e){r.apply(n,[t].concat(e))}))}}var he=function(){return le.apply(null,i(arguments).reverse())},de=Array.prototype.concat,pe=function(t,e,n,r){r=r||j;var o=v(n);Rt(t,e,(function(t,e){o(t,(function(t){return t?e(t):e(null,i(arguments,1))}))}),(function(t,e){for(var n=[],o=0;o<e.length;o++)e[o]&&(n=de.apply(n,e[o]));return r(t,n)}))},be=mt(pe,1/0),me=mt(pe,1),ge=function(){var t=i(arguments),e=[null].concat(t);return function(){var t=arguments[arguments.length-1];return t.apply(this,e)}};function ye(t){return t}function ve(t,e){return function(n,r,o,i){i=i||j;var a,s=!1;n(r,(function(n,r,i){o(n,(function(r,o){r?i(r):t(o)&&!a?(s=!0,a=e(!0,n),i(null,B)):i()}))}),(function(t){t?i(t):i(null,s?a:e(!1))}))}}function we(t,e){return e}var Ce=wt(ve(ye,we)),Ee=xt(ve(ye,we)),ke=mt(Ee,1);function xe(t){return function(e){var n=i(arguments,1);n.push((function(e){var n=i(arguments,1);"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&Pt(n,(function(e){console[t](e)})))})),v(e).apply(null,n)}}var Re=xe("dir");function _e(t,e,n){n=dt(n||j);var r=v(t),o=v(e);function a(t){if(t)return n(t);var e=i(arguments,1);e.push(s),o.apply(this,e)}function s(t,e){return t?n(t):e?void r(a):n(null)}s(null,!0)}function Oe(t,e,n){n=dt(n||j);var r=v(t),o=function(t){if(t)return n(t);var a=i(arguments,1);if(e.apply(this,a))return r(o);n.apply(null,[null].concat(a))};r(o)}function Pe(t,e,n){Oe(t,(function(){return!e.apply(this,arguments)}),n)}function Te(t,e,n){n=dt(n||j);var r=v(e),o=v(t);function i(t){if(t)return n(t);o(a)}function a(t,e){return t?n(t):e?void r(i):n(null)}o(a)}function Se(t){return function(e,n,r){return t(e,r)}}function Ae(t,e,n){vt(t,Se(v(e)),n)}function Me(t,e,n,r){pt(e)(t,Se(v(n)),r)}var Ie=mt(Me,1);function Be(t){return y(t)?t:s((function(e,n){var r=!0;e.push((function(){var t=arguments;r?d((function(){n.apply(null,t)})):n.apply(null,t)})),t.apply(this,e),r=!1}))}function je(t){return!t}var Fe=wt(ve(je,je)),He=xt(ve(je,je)),Le=mt(He,1);function De(t){return function(e){return null==e?void 0:e[t]}}function Ne(t,e,n,r){var o=new Array(e.length);t(e,(function(t,e,r){n(t,(function(t,n){o[e]=!!n,r(t)}))}),(function(t){if(t)return r(t);for(var n=[],i=0;i<e.length;i++)o[i]&&n.push(e[i]);r(null,n)}))}function Ue(t,e,n,r){var o=[];t(e,(function(t,e,r){n(t,(function(n,i){n?r(n):(i&&o.push({index:e,value:t}),r())}))}),(function(t){t?r(t):r(null,jt(o.sort((function(t,e){return t.index-e.index})),De("value")))}))}function We(t,e,n,r){(I(e)?Ne:Ue)(t,e,v(n),r||j)}var ze=wt(We),Ge=xt(We),qe=mt(Ge,1);function Ye(t,e){var n=dt(e||j),r=v(Be(t));!function t(e){if(e)return n(e);r(t)}()}var Je=function(t,e,n,r){r=r||j;var o=v(n);Rt(t,e,(function(t,e){o(t,(function(n,r){return n?e(n):e(null,{key:r,val:t})}))}),(function(t,e){for(var n={},o=Object.prototype.hasOwnProperty,i=0;i<e.length;i++)if(e[i]){var a=e[i].key,s=e[i].val;o.call(n,a)?n[a].push(s):n[a]=[s]}return r(t,n)}))},Ve=mt(Je,1/0),$e=mt(Je,1),Ze=xe("log");function Ke(t,e,n,r){r=F(r||j);var o={},i=v(n);bt(t,e,(function(t,e,n){i(t,e,(function(t,r){if(t)return n(t);o[e]=r,n()}))}),(function(t){r(t,o)}))}var Xe=mt(Ke,1/0),Qe=mt(Ke,1);function tn(t,e){return e in t}function en(t,e){var n=Object.create(null),r=Object.create(null);e=e||ye;var o=v(t),a=s((function(t,a){var s=e.apply(null,t);tn(n,s)?d((function(){a.apply(null,n[s])})):tn(r,s)?r[s].push(a):(r[s]=[a],o.apply(null,t.concat((function(){var t=i(arguments);n[s]=t;var e=r[s];delete r[s];for(var o=0,a=e.length;o<a;o++)e[o].apply(null,t)}))))}));return a.memo=n,a.unmemoized=t,a}var nn=h(f?n.nextTick:u?t:l);function rn(t,e,n){n=n||j;var r=I(e)?[]:{};t(e,(function(t,e,n){v(t)((function(t,o){arguments.length>2&&(o=i(arguments,1)),r[e]=o,n(t)}))}),(function(t){n(t,r)}))}function on(t,e){rn(vt,t,e)}function an(t,e,n){rn(pt(e),t,n)}var sn=function(t,e){var n=v(t);return se((function(t,e){n(t[0],e)}),e,1)},cn=function(t,e){var n=sn(t,e);return n.push=function(t,e,r){if(null==r&&(r=j),"function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,G(t)||(t=[t]),0===t.length)return d((function(){n.drain()}));e=e||0;for(var o=n._tasks.head;o&&e>=o.priority;)o=o.next;for(var i=0,a=t.length;i<a;i++){var s={data:t[i],priority:e,callback:r};o?n._tasks.insertBefore(o,s):n._tasks.push(s)}d(n.process)},delete n.unshift,n};function un(t,e){if(e=F(e||j),!G(t))return e(new TypeError("First argument to race must be an array of functions"));if(!t.length)return e();for(var n=0,r=t.length;n<r;n++)v(t[n])(e)}function fn(t,e,n,r){fe(i(t).reverse(),e,n,r)}function ln(t){var e=v(t);return s((function(t,n){return t.push((function(t,e){var r;t?n(null,{error:t}):(r=arguments.length<=2?e:i(arguments,1),n(null,{value:r}))})),e.apply(this,t)}))}function hn(t){var e;return G(t)?e=jt(t,ln):(e={},At(t,(function(t,n){e[n]=ln.call(this,t)}))),e}function dn(t,e,n,r){We(t,e,(function(t,e){n(t,(function(t,n){e(t,!n)}))}),r)}var pn=wt(dn),bn=xt(dn),mn=mt(bn,1);function gn(t){return function(){return t}}function yn(t,e,n){var r=5,o=0,i={times:r,intervalFunc:gn(o)};function a(t,e){if("object"==typeof e)t.times=+e.times||r,t.intervalFunc="function"==typeof e.interval?e.interval:gn(+e.interval||o),t.errorFilter=e.errorFilter;else{if("number"!=typeof e&&"string"!=typeof e)throw new Error("Invalid arguments for async.retry");t.times=+e||r}}if(arguments.length<3&&"function"==typeof t?(n=e||j,e=t):(a(i,t),n=n||j),"function"!=typeof e)throw new Error("Invalid arguments for async.retry");var s=v(e),c=1;function u(){s((function(t){t&&c++<i.times&&("function"!=typeof i.errorFilter||i.errorFilter(t))?setTimeout(u,i.intervalFunc(c)):n.apply(null,arguments)}))}u()}var vn=function(t,e){e||(e=t,t=null);var n=v(e);return s((function(e,r){function o(t){n.apply(null,e.concat(t))}t?yn(t,o,r):yn(o,r)}))};function wn(t,e){rn(ue,t,e)}var Cn=wt(ve(Boolean,ye)),En=xt(ve(Boolean,ye)),kn=mt(En,1);function xn(t,e,n){var r=v(e);function o(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}Et(t,(function(t,e){r(t,(function(n,r){if(n)return e(n);e(null,{value:t,criteria:r})}))}),(function(t,e){if(t)return n(t);n(null,jt(e.sort(o),De("value")))}))}function Rn(t,e,n){var r=v(t);return s((function(o,i){var a,s=!1;o.push((function(){s||(i.apply(null,arguments),clearTimeout(a))})),a=setTimeout((function(){var e=t.name||"anonymous",r=new Error('Callback function "'+e+'" timed out.');r.code="ETIMEDOUT",n&&(r.info=n),s=!0,i(r)}),e),r.apply(null,o)}))}var _n=Math.ceil,On=Math.max;function Pn(t,e,n,r){var o=v(n);Rt(function(t,e,n,r){for(var o=-1,i=On(_n((e-t)/(n||1)),0),a=Array(i);i--;)a[r?i:++o]=t,t+=n;return a}(0,t,1),e,o,r)}var Tn=mt(Pn,1/0),Sn=mt(Pn,1);function An(t,e,n,r){arguments.length<=3&&(r=n,n=e,e=G(t)?[]:{}),r=F(r||j);var o=v(n);vt(t,(function(t,n,r){o(e,t,n,r)}),(function(t){r(t,e)}))}function Mn(t,e){var n,r=null;e=e||j,Ie(t,(function(t,e){v(t)((function(t,o){n=arguments.length>2?i(arguments,1):o,r=t,e(!t)}))}),(function(){e(r,n)}))}function In(t){return function(){return(t.unmemoized||t).apply(null,arguments)}}function Bn(t,e,n){n=dt(n||j);var r=v(e);if(!t())return n(null);var o=function(e){if(e)return n(e);if(t())return r(o);var a=i(arguments,1);n.apply(null,[null].concat(a))};r(o)}function jn(t,e,n){Bn((function(){return!t.apply(this,arguments)}),e,n)}var Fn=function(t,e){if(e=F(e||j),!G(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var n=0;function r(e){var r=v(t[n++]);e.push(dt(o)),r.apply(null,e)}function o(o){if(o||n===t.length)return e.apply(null,arguments);r(i(arguments,1))}r([])},Hn={apply:a,applyEach:kt,applyEachSeries:Ot,asyncify:p,auto:Bt,autoInject:oe,cargo:ce,compose:he,concat:be,concatLimit:pe,concatSeries:me,constant:ge,detect:Ce,detectLimit:Ee,detectSeries:ke,dir:Re,doDuring:_e,doUntil:Pe,doWhilst:Oe,during:Te,each:Ae,eachLimit:Me,eachOf:vt,eachOfLimit:bt,eachOfSeries:ue,eachSeries:Ie,ensureAsync:Be,every:Fe,everyLimit:He,everySeries:Le,filter:ze,filterLimit:Ge,filterSeries:qe,forever:Ye,groupBy:Ve,groupByLimit:Je,groupBySeries:$e,log:Ze,map:Et,mapLimit:Rt,mapSeries:_t,mapValues:Xe,mapValuesLimit:Ke,mapValuesSeries:Qe,memoize:en,nextTick:nn,parallel:on,parallelLimit:an,priorityQueue:cn,queue:sn,race:un,reduce:fe,reduceRight:fn,reflect:ln,reflectAll:hn,reject:pn,rejectLimit:bn,rejectSeries:mn,retry:yn,retryable:vn,seq:le,series:wn,setImmediate:d,some:Cn,someLimit:En,someSeries:kn,sortBy:xn,timeout:Rn,times:Tn,timesLimit:Pn,timesSeries:Sn,transform:An,tryEach:Mn,unmemoize:In,until:jn,waterfall:Fn,whilst:Bn,all:Fe,allLimit:He,allSeries:Le,any:Cn,anyLimit:En,anySeries:kn,find:Ce,findLimit:Ee,findSeries:ke,forEach:Ae,forEachSeries:Ie,forEachLimit:Me,forEachOf:vt,forEachOfSeries:ue,forEachOfLimit:bt,inject:fe,foldl:fe,foldr:fn,select:ze,selectLimit:Ge,selectSeries:qe,wrapSync:p};e.default=Hn,e.apply=a,e.applyEach=kt,e.applyEachSeries=Ot,e.asyncify=p,e.auto=Bt,e.autoInject=oe,e.cargo=ce,e.compose=he,e.concat=be,e.concatLimit=pe,e.concatSeries=me,e.constant=ge,e.detect=Ce,e.detectLimit=Ee,e.detectSeries=ke,e.dir=Re,e.doDuring=_e,e.doUntil=Pe,e.doWhilst=Oe,e.during=Te,e.each=Ae,e.eachLimit=Me,e.eachOf=vt,e.eachOfLimit=bt,e.eachOfSeries=ue,e.eachSeries=Ie,e.ensureAsync=Be,e.every=Fe,e.everyLimit=He,e.everySeries=Le,e.filter=ze,e.filterLimit=Ge,e.filterSeries=qe,e.forever=Ye,e.groupBy=Ve,e.groupByLimit=Je,e.groupBySeries=$e,e.log=Ze,e.map=Et,e.mapLimit=Rt,e.mapSeries=_t,e.mapValues=Xe,e.mapValuesLimit=Ke,e.mapValuesSeries=Qe,e.memoize=en,e.nextTick=nn,e.parallel=on,e.parallelLimit=an,e.priorityQueue=cn,e.queue=sn,e.race=un,e.reduce=fe,e.reduceRight=fn,e.reflect=ln,e.reflectAll=hn,e.reject=pn,e.rejectLimit=bn,e.rejectSeries=mn,e.retry=yn,e.retryable=vn,e.seq=le,e.series=wn,e.setImmediate=d,e.some=Cn,e.someLimit=En,e.someSeries=kn,e.sortBy=xn,e.timeout=Rn,e.times=Tn,e.timesLimit=Pn,e.timesSeries=Sn,e.transform=An,e.tryEach=Mn,e.unmemoize=In,e.until=jn,e.waterfall=Fn,e.whilst=Bn,e.all=Fe,e.allLimit=He,e.allSeries=Le,e.any=Cn,e.anyLimit=En,e.anySeries=kn,e.find=Ce,e.findLimit=Ee,e.findSeries=ke,e.forEach=Ae,e.forEachSeries=Ie,e.forEachLimit=Me,e.forEachOf=vt,e.forEachOfSeries=ue,e.forEachOfLimit=bt,e.inject=fe,e.foldl=fe,e.foldr=fn,e.select=ze,e.selectLimit=Ge,e.selectSeries=qe,e.wrapSync=p,Object.defineProperty(e,"__esModule",{value:!0})})(e)}).call(this,n(56).setImmediate,n(6),n(4),n(58)(t))},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(57),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(4))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,o,i,a,s,c=1,u={},f=!1,l=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){i.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(o=l.documentElement,r=function(t){var e=l.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):r=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return u[c]=o,r(c),c++},h.clearImmediate=d}function d(t){delete u[t]}function p(t){if(f)setTimeout(p,0,t);else{var e=u[t];if(e){f=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{d(t),f=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(4),n(6))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";const r=n(15),o=n(1);t.exports=function(t){const e=new r({parentHash:t.parentHash,uncleHash:t.sha3Uncles,coinbase:t.miner,stateRoot:t.stateRoot,transactionsTrie:t.transactionsRoot,receiptTrie:t.receiptRoot||t.receiptsRoot||o.SHA3_NULL,bloom:t.logsBloom,difficulty:t.difficulty,number:t.number,gasLimit:t.gasLimit,gasUsed:t.gasUsed,timestamp:t.timestamp,extraData:t.extraData,mixHash:t.mixHash,nonce:t.nonce});return e.hash=function(){return o.toBuffer(t.hash)},e}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,n){var r=t.call(this,n,e.network)||this;return r.registry=new r.web3Client.parentWeb3.eth.Contract(e.network.abi("Registry"),e.registry),r}return o(e,t),e}(i(n(2)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=s(n(2)),u=s(n(5)),f={info:n(0)("maticjs:Web3Client"),debug:n(0)("maticjs:debug:Web3Client")},l=function(t){function e(e,n){var r=t.call(this,n,e.network)||this;return r.rootChain=new r.web3Client.parentWeb3.eth.Contract(e.network.abi("RootChain"),e.rootChain),r}return o(e,t),e.prototype.getLastChildBlock=function(){return this.web3Client.call(this.rootChain.methods.getLastChildBlock())},e.prototype.getCheckpointInclusion=function(t){return i(this,void 0,void 0,(function(){var e,n,r;return a(this,(function(o){switch(o.label){case 0:return[4,this.getLastChildBlock()];case 1:return e=o.sent(),[4,this.web3Client.getMaticWeb3().eth.getTransaction(t)];case 2:return n=o.sent(),new u.default(e).lt(new u.default(n.blockNumber))?[2,"Burn transaction has not been checkpointed as yet"]:[4,this.findHeaderBlockNumber(n.blockNumber)];case 3:return r=o.sent(),[4,this.web3Client.call(this.rootChain.methods.headerBlocks(this.encode(r)))];case 4:return[2,o.sent()]}}))}))},e.prototype.findHeaderBlockNumber=function(t){return i(this,void 0,void 0,(function(){var n,r,o,i,s,c,l,h;return a(this,(function(a){switch(a.label){case 0:return t=new u.default(t),n=e.BIG_ONE,o=u.default.bind,[4,this.web3Client.call(this.rootChain.methods.currentHeaderBlock())];case 1:r=(new(o.apply(u.default,[void 0,a.sent()]))).div(e.CHECKPOINT_ID_INTERVAL),a.label=2;case 2:return n.lte(r)?n.eq(r)?(i=n,[3,4]):(s=n.add(r).div(e.BIG_TWO),f.debug({start:n.toString(),mid:s.toString(),end:r.toString()}),[4,this.web3Client.call(this.rootChain.methods.headerBlocks(s.mul(e.CHECKPOINT_ID_INTERVAL).toString()))]):[3,4];case 3:return c=a.sent(),l=new u.default(c.start),h=new u.default(c.end),l.lte(t)&&t.lte(h)?(i=s,[3,4]):(l.gt(t)?r=s.sub(e.BIG_ONE):h.lt(t)&&(n=s.add(e.BIG_ONE)),[3,2]);case 4:return[2,i.mul(e.CHECKPOINT_ID_INTERVAL)]}}))}))},e.BIG_ONE=new u.default(1),e.BIG_TWO=new u.default(2),e.CHECKPOINT_ID_INTERVAL=new u.default(1e4),e}(c.default);e.default=l},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=s(n(1)),u=s(n(2)),f=s(n(10)),l=s(n(12)),h={info:n(0)("maticjs:WithdrawManager"),debug:n(0)("maticjs:debug:WithdrawManager")},d=function(t){function e(e,n,r,o){var i=t.call(this,r,e.network)||this;return i.withdrawManager=new i.web3Client.parentWeb3.eth.Contract(i.network.abi("WithdrawManager"),e.withdrawManager),i.rootChain=n,i.registry=o,i.exitManager=new f.default(n,e,r),i}return o(e,t),e.prototype.initialize=function(){return i(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:return[4,this.registry.registry.methods.erc20Predicate().call()];case 1:return t=n.sent(),[4,this.registry.registry.methods.erc721Predicate().call()];case 2:return e=n.sent(),this.erc20Predicate=new this.web3Client.parentWeb3.eth.Contract(this.network.abi("ERC20Predicate"),t),this.erc721Predicate=new this.web3Client.parentWeb3.eth.Contract(this.network.abi("ERC721Predicate"),e),[2]}}))}))},e.prototype.burnERC20Tokens=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o;return a(this,(function(i){switch(i.label){case 0:return t===u.default.MATIC_CHILD_TOKEN?(r=this.getChildMaticContract().methods.withdraw(this.encode(e)),n.value=this.encode(e)):r=this.getERC20TokenContract(t).methods.withdraw(this.encode(e)),[4,this.web3Client.fillOptions(r,!1,n)];case 1:return(o=i.sent()).encodeAbi?[2,Object.assign(o,{data:r.encodeABI(),to:t})]:[2,this.web3Client.send(r,o,n)]}}))}))},e.prototype.burnERC721Token=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o;return a(this,(function(i){switch(i.label){case 0:return r=this.getERC721TokenContract(t).methods.withdraw(this.encode(e)),[4,this.web3Client.fillOptions(r,!1,n)];case 1:return(o=i.sent()).encodeAbi?[2,Object.assign(o,{data:r.encodeABI(),to:t})]:[2,this.web3Client.send(r,o,n)]}}))}))},e.prototype.processExits=function(t,e){return i(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return n=Array.isArray(t)?this.withdrawManager.methods.processExitsBatch(t):this.withdrawManager.methods.processExits(t),(!(e=e||{})||!e.gas||e.gas<2e6)&&(h.info("processExits can be gas expensive, sending in 2000000 gas but even this might not be enough"),e.gas=2e6),[4,this.web3Client.fillOptions(n,!0,e)];case 1:return(r=o.sent()).encodeAbi?[2,Object.assign(r,{data:n.encodeABI(),to:this.withdrawManager.options.address})]:[2,this.web3Client.send(n,r,e)]}}))}))},e.prototype.startExitWithBurntERC20Tokens=function(t,n){return i(this,void 0,void 0,(function(){var r,o,i;return a(this,(function(a){switch(a.label){case 0:return[4,this.exitManager.buildPayloadForExit(t,e.ERC20_WITHDRAW_EVENT_SIG)];case 1:return r=a.sent(),o=this.erc20Predicate.methods.startExitWithBurntTokens(r),[4,this.web3Client.fillOptions(o,!0,n)];case 2:return(i=a.sent()).encodeAbi?[2,Object.assign(i,{data:o.encodeABI(),to:this.erc20Predicate.options.address})]:[2,this.web3Client.send(o,i,n)]}}))}))},e.prototype.startExitWithBurntERC20TokensHermoine=function(t,n){return i(this,void 0,void 0,(function(){var r,o,i;return a(this,(function(a){switch(a.label){case 0:return[4,this.exitManager.buildPayloadForExitHermoine(t,e.ERC20_WITHDRAW_EVENT_SIG)];case 1:return r=a.sent(),o=this.erc20Predicate.methods.startExitWithBurntTokens(r),[4,this.web3Client.fillOptions(o,!0,n)];case 2:return(i=a.sent()).encodeAbi?[2,Object.assign(i,{data:o.encodeABI(),to:this.erc20Predicate.options.address})]:[2,this.web3Client.send(o,i,n)]}}))}))},e.prototype.startExitWithBurntERC721Tokens=function(t,n){return i(this,void 0,void 0,(function(){var r,o,i;return a(this,(function(a){switch(a.label){case 0:return[4,this.exitManager.buildPayloadForExit(t,e.ERC721_WITHDRAW_EVENT_SIG)];case 1:return r=a.sent(),o=this.erc721Predicate.methods.startExitWithBurntTokens(r),[4,this.web3Client.fillOptions(o,!0,n)];case 2:return(i=a.sent()).encodeAbi?[2,Object.assign(i,{data:o.encodeABI(),to:this.erc721Predicate.options.address})]:[2,this.web3Client.send(o,i,n)]}}))}))},e.prototype.startExitWithBurntERC721TokensHermoine=function(t,n){return i(this,void 0,void 0,(function(){var r,o,i;return a(this,(function(a){switch(a.label){case 0:return[4,this.exitManager.buildPayloadForExitHermoine(t,e.ERC721_WITHDRAW_EVENT_SIG)];case 1:return r=a.sent(),o=this.erc721Predicate.methods.startExitWithBurntTokens(r),[4,this.web3Client.fillOptions(o,!0,n)];case 2:return(i=a.sent()).encodeAbi?[2,Object.assign(i,{data:o.encodeABI(),to:this.erc721Predicate.options.address})]:[2,this.web3Client.send(o,i,n)]}}))}))},e.prototype.getExitTime=function(t,e){return i(this,void 0,void 0,(function(){var n,r,o,i,s,c;return a(this,(function(a){switch(a.label){case 0:return r=parseInt,[4,this.web3Client.call(this.withdrawManager.methods.HALF_EXIT_PERIOD())];case 1:return n=r.apply(void 0,[a.sent()]),[4,this.web3Client.getParentWeb3().eth.getTransaction(e)];case 2:return o=a.sent().blockNumber,[4,this.web3Client.getParentWeb3().eth.getBlock(o)];case 3:return i=a.sent().timestamp,[4,this.rootChain.getCheckpointInclusion(t)];case 4:return s=a.sent().createdAt,[2,{exitTime:c=Math.max(parseInt(s)+2*n,+i+n),exitable:Date.now()/1e3>c}]}}))}))},e.prototype.startExitForMintableBurntToken=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o,i,s,c,u;return a(this,(function(a){switch(a.label){case 0:return[4,this._buildPayloadAndFindMintTransaction(t)];case 1:return r=a.sent(),o=r.payload,i=r.mint,s=new this.web3Client.parentWeb3.eth.Contract(this.network.abi("MintableERC721Predicate"),e),c=s.methods.startExitForMintableBurntToken(o,i),[4,this.web3Client.fillOptions(c,!0,n)];case 2:return u=a.sent(),[2,this.web3Client.send(c,u,n)]}}))}))},e.prototype.startExitForMetadataMintableBurntToken=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o,i,s,c,u;return a(this,(function(a){switch(a.label){case 0:return[4,this._buildPayloadAndFindMintTransaction(t)];case 1:return r=a.sent(),o=r.payload,i=r.mint,s=new this.web3Client.parentWeb3.eth.Contract(this.network.abi("MintableERC721Predicate"),e),c=s.methods.startExitForMetadataMintableBurntToken(o,i),[4,this.web3Client.fillOptions(c,!0,n)];case 2:return u=a.sent(),[2,this.web3Client.send(c,u,n)]}}))}))},e.prototype._buildPayloadAndFindMintTransaction=function(t){return i(this,void 0,void 0,(function(){var n,r,o,i,s,u,f,d,p;return a(this,(function(a){switch(a.label){case 0:return[4,this.exitManager.buildPayloadForExit(t,e.ERC721_WITHDRAW_EVENT_SIG)];case 1:return n=a.sent(),[4,this.web3Client.web3.eth.getTransactionReceipt(t)];case 2:return r=a.sent(),o=r.logs.find((function(t){return t.topics[0].toLowerCase()===e.ERC721_WITHDRAW_EVENT_SIG})),i=o.data,h.debug({burnTxHash:t,burnReceipt:r,withdrawEvent:o,tokenId:i}),[4,new this.web3Client.web3.eth.Contract(this.network.abi("ChildERC721Mintable"),r.to).getPastEvents("Transfer",{filter:{tokenId:i},fromBlock:0,toBlock:"latest"})];case 3:if(s=a.sent(),h.debug({mintEvents:s}),!s||!s.length)throw new Error("Could not retrieve the mint event");return u=s.find((function(t){return t.raw.topics[3]===i})).transactionHash,[4,this.web3Client.web3.eth.getTransaction(u)];case 4:return f=a.sent(),p=(d=c.default).bufferToHex,[4,l.default.getTxBytes(f)];case 5:return f=p.apply(d,[a.sent()]),[2,{payload:n,mint:f}]}}))}))},e.ERC721_WITHDRAW_EVENT_SIG="0x9b1bfa7fa9ee420a16e124f794c35ac9f90472acc99140eb2f6447c714cad8eb".toLowerCase(),e.ERC20_WITHDRAW_EVENT_SIG="0xebff2602b3f468259e1e99f613fed6691f3a6526effe6ef3e768ba7ae7a36c4f".toLowerCase(),e}(u.default);e.default=d}]).default}));
//# sourceMappingURL=matic.umd.min.js.map